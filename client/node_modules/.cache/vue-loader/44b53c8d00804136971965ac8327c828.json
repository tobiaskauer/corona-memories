{"remainingRequest":"/Users/tk/GitHub/corona-memories/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tk/GitHub/corona-memories/client/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tk/GitHub/corona-memories/client/src/App.vue","mtime":1614793275237},{"path":"/Users/tk/GitHub/corona-memories/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tk/GitHub/corona-memories/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tk/GitHub/corona-memories/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tk/GitHub/corona-memories/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJwppbXBvcnQgQXN5bmNDb21wdXRlZCBmcm9tICd2dWUtYXN5bmMtY29tcHV0ZWQnClZ1ZS51c2UoQXN5bmNDb21wdXRlZCkKaW1wb3J0ICdpbnRlcnNlY3Rpb24tb2JzZXJ2ZXInIC8vIGZvciBjcm9zcy1icm93c2VyIHN1cHBvcnQKaW1wb3J0IFNjcm9sbGFtYSBmcm9tICd2dWUtc2Nyb2xsYW1hJwoKCmltcG9ydCBjYXNlU2VydmljZSBmcm9tICdAL3NlcnZpY2VzL2Nhc2VTZXJ2aWNlJwppbXBvcnQgbWVtb3J5U2VydmljZSBmcm9tICdAL3NlcnZpY2VzL21lbW9yeVNlcnZpY2UnCgoKCmltcG9ydCBtZW1vcnlGb3JtIGZyb20gJy4vY29tcG9uZW50cy9tZW1vcnlGb3JtJwppbXBvcnQgbWVtb3J5RGlzcGxheSBmcm9tICcuL2NvbXBvbmVudHMvbWVtb3J5RGlzcGxheScKaW1wb3J0IGNvdW50ZXIgZnJvbSAnLi9jb21wb25lbnRzL2NvdW50ZXInCmltcG9ydCB2aXMgZnJvbSAnLi9jb21wb25lbnRzL3ZpcycKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQXBwJywKICBjb21wb25lbnRzOiB7CiAgICBTY3JvbGxhbWEsCiAgICBtZW1vcnlGb3JtLAogICAgbWVtb3J5RGlzcGxheSwKICAgIGNvdW50ZXIsCiAgICB2aXMKICB9LAoKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIG1vdW50ZWQ6IGZhbHNlLAogICAgICBjb25zZW50OiBmYWxzZSwKICAgICAgY291bnRyaWVzOiBudWxsLAogICAgICBjdXJyZW50Q291bnRyeTogIkdlcm1hbnkiLCAgICAgIAoKICAgICAgdmlzT3B0aW9uczogewogICAgICAgIGRpbWVuc2lvbnM6IHt3aWR0aDogMCwgaGVpZ2h0OiAwLCB0b3A6IDIwLCByaWdodDogNTAsIGJvdHRvbTogNTAsIGxlZnQ6IDUwfSwKICAgICAgICBwcm9nZXNzOiAwLAogICAgICAgIG92ZXJsYXk6IGZhbHNlLAogICAgICAgIGRpc3BsYXlNZW1vcnk6IGZhbHNlCiAgICAgIH0sCgogICAgICBkaXNwbGF5TWVtb3J5OiB7CiAgICAgICAgZGlzcGxheTogZmFsc2UsCiAgICAgIH0sCiAgICAgIG5ld01lbW9yeTogewogICAgICAgIHNob3dMaW5lOiBmYWxzZSwKICAgICAgICBzaG93Rm9ybTogZmFsc2UsCiAgICAgICAgZGF0ZTogIiIKICAgICAgICAvL2RhdGU6ICIyMDIwLTAyLTIzIiAvL3RvIHF1aWNrZXIgdGVzdCBmb3JtCiAgICAgIH0KICAgIH0KICB9LAoKICBhc3luY0NvbXB1dGVkOiB7CiAgICBhc3luYyBjYXNlcygpIHsKICAgICAgcmV0dXJuIChhd2FpdCBjYXNlU2VydmljZS5nZXRDYXNlcyh7Y291bnRyeTogdGhpcy5jdXJyZW50Q291bnRyeSwgbWV0cmljOiAicmVsYXRpdmVfY2FzZXMifSkpLmRhdGEKICAgIH0sCiAgICBhc3luYyBtZW1vcmllcygpIHsKICAgICAgcmV0dXJuIChhd2FpdCBtZW1vcnlTZXJ2aWNlLmdldE1lbW9yaWVzKHtjb3VudHJ5OiB0aGlzLmN1cnJlbnRDb3VudHJ5fSkpLmRhdGEKICAgIH0KICB9LAoKICBjcmVhdGVkKCkgewogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIHRoaXMucmVzaXplKTsKICB9LAoKICBhc3luYyBtb3VudGVkICgpIHsKICAgIHRoaXMuY291bnRyaWVzID0gKGF3YWl0IGNhc2VTZXJ2aWNlLmdldENvdW50cmllcygpKS5kYXRhLm1hcChlID0+IGUuY291bnRyeSkKICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgdGhpcy5yZXNpemUoKQogICAgICB0aGlzLm1vdW50ZWQgPSB0cnVlOwogICAgfSkKIH0sCgogIG1ldGhvZHM6IHsKICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7CiAgICAgIFZ1ZS5zZXQodGhpcy52aXNPcHRpb25zLmRpbWVuc2lvbnMsJ3dpZHRoJyx3aW5kb3cuaW5uZXJXaWR0aCkKICAgICAgLy9WdWUuc2V0KHRoaXMudmlzT3B0aW9ucy5kaW1lbnNpb25zLCdoZWlnaHQnLHdpbmRvdy5pbm5lckhlaWdodCkKICAgICAgVnVlLnNldCh0aGlzLnZpc09wdGlvbnMuZGltZW5zaW9ucywnaGVpZ2h0Jyw1MDApCiAgICB9LAoKICAgIHNjcm9sbERvd246IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLmNvbnNlbnQgPSB0cnVlCiAgICAgLy8gdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuJHZ1ZXRpZnkuZ29UbygiI3RhcmdldCIsIHtkdXJhdGlvbjogMjAwMH0pOwogICAgICAvL30pOwogICAgfSwKCiAgICBzaG93TWVtb3J5OiBmdW5jdGlvbihtZW1vcnkpIHsKICAgICAgaWYobWVtb3J5KSB7CiAgICAgICAgVnVlLnNldCh0aGlzLm1lbW9yaWVzW3RoaXMubWVtb3JpZXMuZmluZEluZGV4KGUgPT4gZS5pZCA9PSBtZW1vcnkuaWQpXSwnYWN0aXZlJyx0cnVlKQogICAgICAgIFZ1ZS5zZXQodGhpcy5kaXNwbGF5TWVtb3J5LCdtZW1vcnknLG1lbW9yeSkKICAgICAgICBWdWUuc2V0KHRoaXMuZGlzcGxheU1lbW9yeSwnZGlzcGxheScsdHJ1ZSkKICAgICAgICB0aGlzLm92ZXJsYXkgPSB0cnVlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgVnVlLnNldCh0aGlzLmRpc3BsYXlNZW1vcnksJ2Rpc3BsYXknLGZhbHNlKQogICAgICAgIFZ1ZS5zZXQodGhpcy5tZW1vcmllc1t0aGlzLm1lbW9yaWVzLmZpbmRJbmRleChlID0+IGUuYWN0aXZlKV0sJ2FjdGl2ZScsZmFsc2UpCiAgICAgICAgdGhpcy5vdmVybGF5ID0gZmFsc2UKICAgICAgfQogICAgfSwKCiAgICBzdGVwRW50ZXJIYW5kbGVyKHtlbGVtZW50LCBkaXJlY3Rpb259KSB7CiAgICAgIGRpcmVjdGlvbiAvL21heWJlIHdlIG5lZWQgdGhpcyBsYXRlcgogICAgICBzd2l0Y2goZWxlbWVudC5jbGFzc05hbWUpIHsKICAgICAgICBjYXNlICJpbnRyb1dyYXBwZXIiOiAKICAgICAgICAgICBWdWUuc2V0KHRoaXMudmlzT3B0aW9ucywncHJvZ3Jlc3MnLDApCiAgICAgICAgICBicmVhawogICAgICB9CiAgICAgIC8vdGhpcy5jdXJyU3RlcElkID0gZWxlbWVudC5kYXRhc2V0LnN0ZXBJZAogICAgfSwKCiAgICBzdGVwUHJvZ3Jlc3NIYW5kbGVyKHtlbGVtZW50LCBwcm9ncmVzc30pIHsKICAgICAgaWYoZWxlbWVudC5jbGFzc05hbWUgPT0gImFuaW1hdG9yV3JhcHBlciIgJiYgdGhpcy5jb25zZW50KSB7CiAgICAgICAgbGV0IHNob3dFbGVtZW50c051bWJlciA9IE1hdGguY2VpbChwcm9ncmVzcyAqIHRoaXMubWVtb3JpZXMubGVuZ3RoKQogICAgICAgIFZ1ZS5zZXQodGhpcy52aXNPcHRpb25zLCdwcm9ncmVzcycsc2hvd0VsZW1lbnRzTnVtYmVyKQogICAgICB9CiAgICAgIAogICAgIAogICAgICAKICAgIH0sCgogICAgc2hvd0xpbmU6IGZ1bmN0aW9uKHNob3cpIHsKICAgICAgVnVlLnNldCh0aGlzLm5ld01lbW9yeSwnc2hvd0xpbmUnLHNob3cpCiAgICB9LAoKICAgIHRvZ2dsZUZvcm06IGZ1bmN0aW9uKGV2ZW50KSB7IC8vdXNpbmcgYW4gb3duIG1ldGhvZCBpbnN0ZWFkIG9mIGlubGluZSBhc3NpZ25tZW50IHRvIHN0YXkgc2FuZQogICAgICBpZihldmVudCkgewogICAgICAgIFZ1ZS5zZXQodGhpcy5uZXdNZW1vcnksJ2RhdGUnLGV2ZW50KQogICAgICAgIFZ1ZS5zZXQodGhpcy5uZXdNZW1vcnksJ3Nob3dMaW5lJyxmYWxzZSkKICAgICAgICBWdWUuc2V0KHRoaXMubmV3TWVtb3J5LCdzaG93Rm9ybScsdHJ1ZSkKICAgICAgICB0aGlzLm92ZXJsYXkgPSB0cnVlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgVnVlLnNldCh0aGlzLm5ld01lbW9yeSwnc2hvd0Zvcm0nLGZhbHNlKQogICAgICAgIHRoaXMub3ZlcmxheSA9IGZhbHNlCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <v-app>\n    <template v-if=\"cases && memories && countries && mounted\">\n    <h1>corona<br /><span>memories</span></h1>\n    <Scrollama\n      class=\"scrollama\"\n      :progress=\"true\"\n      @step-enter=\"stepEnterHandler\"\n      @step-progress=\"stepProgressHandler\"\n    >\n      <div slot=\"graphic\" class=\"visWrapper\">\n        <vis\n          :cases=\"cases\"\n          :memories=\"memories\"\n          :options=\"visOptions\"\n          :country=\"currentCountry\"\n          :dateSelector=\"newMemory.showLine\"\n          @showForm=\"toggleForm($event)\"\n          @showMemory=\"showMemory\" />\n      </div>\n\n        <div class=\"introWrapper\" data-step=\"1\">  \n          <p class=\"larger\"> Numbers do not tell stories. <strong>People do.</strong></p>\n          <p>Since the start of the pandemic <counter /> days ago, we are confronted with charts about new cases or even deaths. What are the human stories behind the numbers?</p>\n          <p class=\"smaller\">The research is conducted by Tobias Kauer (University of Edinburgh), Benjamin Bach (University of Edinburgh), and Marian DÃ¶rk (Potsdam University of Applied Sciences). It has been granted approval by the ethics committee. By clicking the button, you indicate that you are a speaker of English and at least 18 years old. You read the information letter and you voluntarily agree to  participate, and understand you can stop your participation at any time. You agree that your anonymous data may be kept permanently in Edinburgh University archived and may be used by qualified researchers for teaching and research purposes.</p>\n          \n          \n            <v-btn color=\"primary\" outlined @click=\"scrollDown\">\n              <v-icon small>mdi-check-circle</v-icon>\n             I agree, show me\n            </v-btn>\n        </div>\n\n        <div class=\"animatorWrapper\" data-step=\"2\" ></div>\n\n        <div v-if=\"consent\" id=\"target\" class=\"explorationWrapper\" data-step=\"3\">\n          <p>Add your story to the curve</p>\n          <v-select\n            :items=\"countries\"\n            v-model=\"currentCountry\"\n            label=\"Your country\"\n            outlined />\n          <v-btn\n            color=\"primary\"\n            outlined\n            block\n            @click=\"showLine(true)\"\n          > I have a memory</v-btn>\n        </div>\n\n        \n      \n\n      <div class=\"formWrapper\" v-if=\"newMemory.showForm\">\n        <memoryForm\n          :date=\"newMemory.date\"\n          :country=\"currentCountry\"\n          @close=\"toggleForm(false)\"/>\n      </div>\n      <div class=\"memoryWrapper\" v-if=\"displayMemory.display\">\n        <memoryDisplay\n          :memory=\"displayMemory.memory\"\n          @close=\"showMemory(false)\"/>\n      </div>\n    </Scrollama>\n    </template>\n    <template v-else>\n      <v-card class=\"d-flex justify-center mb-6\" color=\"rgb(255, 0, 0, 0.0)\" elevation=\"0\" style=\"margin-top: 100px;\">\n        <v-progress-circular\n        :size=\"300\"\n        indeterminate\n        color=\"primary\"\n        >Loading ...<br />try refresing?</v-progress-circular>\n      </v-card>\n      </template>\n  </v-app>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport AsyncComputed from 'vue-async-computed'\nVue.use(AsyncComputed)\nimport 'intersection-observer' // for cross-browser support\nimport Scrollama from 'vue-scrollama'\n\n\nimport caseService from '@/services/caseService'\nimport memoryService from '@/services/memoryService'\n\n\n\nimport memoryForm from './components/memoryForm'\nimport memoryDisplay from './components/memoryDisplay'\nimport counter from './components/counter'\nimport vis from './components/vis'\n\nexport default {\n  name: 'App',\n  components: {\n    Scrollama,\n    memoryForm,\n    memoryDisplay,\n    counter,\n    vis\n  },\n\n  data () {\n    return {\n      mounted: false,\n      consent: false,\n      countries: null,\n      currentCountry: \"Germany\",      \n\n      visOptions: {\n        dimensions: {width: 0, height: 0, top: 20, right: 50, bottom: 50, left: 50},\n        progess: 0,\n        overlay: false,\n        displayMemory: false\n      },\n\n      displayMemory: {\n        display: false,\n      },\n      newMemory: {\n        showLine: false,\n        showForm: false,\n        date: \"\"\n        //date: \"2020-02-23\" //to quicker test form\n      }\n    }\n  },\n\n  asyncComputed: {\n    async cases() {\n      return (await caseService.getCases({country: this.currentCountry, metric: \"relative_cases\"})).data\n    },\n    async memories() {\n      return (await memoryService.getMemories({country: this.currentCountry})).data\n    }\n  },\n\n  created() {\n    window.addEventListener(\"resize\", this.resize);\n  },\n\n  async mounted () {\n    this.countries = (await caseService.getCountries()).data.map(e => e.country)\n    this.$nextTick(() => {\n      this.resize()\n      this.mounted = true;\n    })\n },\n\n  methods: {\n    resize: function() {\n      Vue.set(this.visOptions.dimensions,'width',window.innerWidth)\n      //Vue.set(this.visOptions.dimensions,'height',window.innerHeight)\n      Vue.set(this.visOptions.dimensions,'height',500)\n    },\n\n    scrollDown: function() {\n      this.consent = true\n     // this.$nextTick(() => {\n        this.$vuetify.goTo(\"#target\", {duration: 2000});\n      //});\n    },\n\n    showMemory: function(memory) {\n      if(memory) {\n        Vue.set(this.memories[this.memories.findIndex(e => e.id == memory.id)],'active',true)\n        Vue.set(this.displayMemory,'memory',memory)\n        Vue.set(this.displayMemory,'display',true)\n        this.overlay = true\n      } else {\n        Vue.set(this.displayMemory,'display',false)\n        Vue.set(this.memories[this.memories.findIndex(e => e.active)],'active',false)\n        this.overlay = false\n      }\n    },\n\n    stepEnterHandler({element, direction}) {\n      direction //maybe we need this later\n      switch(element.className) {\n        case \"introWrapper\": \n           Vue.set(this.visOptions,'progress',0)\n          break\n      }\n      //this.currStepId = element.dataset.stepId\n    },\n\n    stepProgressHandler({element, progress}) {\n      if(element.className == \"animatorWrapper\" && this.consent) {\n        let showElementsNumber = Math.ceil(progress * this.memories.length)\n        Vue.set(this.visOptions,'progress',showElementsNumber)\n      }\n      \n     \n      \n    },\n\n    showLine: function(show) {\n      Vue.set(this.newMemory,'showLine',show)\n    },\n\n    toggleForm: function(event) { //using an own method instead of inline assignment to stay sane\n      if(event) {\n        Vue.set(this.newMemory,'date',event)\n        Vue.set(this.newMemory,'showLine',false)\n        Vue.set(this.newMemory,'showForm',true)\n        this.overlay = true\n      } else {\n        Vue.set(this.newMemory,'showForm',false)\n        this.overlay = false\n      }\n    }\n  }\n}\n</script>\n\n<style src=\"vue-scrollama/dist/vue-scrollama.css\"></style>\n\n<style>\n@import url('https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;900&display=swap');\n\n.introWrapper, .explorationWrapper, .animatorWrapper  {\n  border: 1px dotted black;\n  \n\n  height: 100vh;\n  padding-top: 150px;\n}\n\n.scrollama {\n  width: 40%;\n  padding: 0 0px 50px 30px;\n  min-width: 200px;\n  max-width: 400px;\n  font-family: 'Roboto Slab', serif;\n  pointer-events: none;\n}\n\nbutton, .v-input {\n  pointer-events: all;\n}\n\nh1{\n  margin: 50px 0 0 30px;\n  height: 100px;\n  position: fixed;\n  font-family: 'Roboto Slab', serif;\n  font-weight: 400;\n  font-size: 40px;\n  color: #FA5E2D;\n  line-height: 30px;\n}\n\nh1 span{\n  font-weight: 900;\n}\n\np {\n  font-family: 'Roboto Slab', serif;\n  font-weight: 400;\n}\n\np.larger {\n  font-size: 1.2em;\n}\n\np.smaller {\n  color: rgba(0,0,0,.5);\n  font-size: 9px;\n  line-height: 10px;\n}\n\n.visWrapper {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n}\n\n\n#app {\n  background: #FFEBC6;\n  min-height: 100%;\n  height: 100%\n}\n</style>\n"]}]}