{"remainingRequest":"/Users/tk/GitHub/corona-memories/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tk/GitHub/corona-memories/client/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tk/GitHub/corona-memories/client/src/App.vue","mtime":1614608323628},{"path":"/Users/tk/GitHub/corona-memories/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tk/GitHub/corona-memories/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tk/GitHub/corona-memories/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tk/GitHub/corona-memories/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJwppbXBvcnQgQXN5bmNDb21wdXRlZCBmcm9tICd2dWUtYXN5bmMtY29tcHV0ZWQnClZ1ZS51c2UoQXN5bmNDb21wdXRlZCkKCmltcG9ydCBjYXNlU2VydmljZSBmcm9tICdAL3NlcnZpY2VzL2Nhc2VTZXJ2aWNlJwppbXBvcnQgbWVtb3J5U2VydmljZSBmcm9tICdAL3NlcnZpY2VzL21lbW9yeVNlcnZpY2UnCgppbXBvcnQgbWVtb3J5Rm9ybSBmcm9tICcuL2NvbXBvbmVudHMvbWVtb3J5Rm9ybScKaW1wb3J0IG1lbW9yeURpc3BsYXkgZnJvbSAnLi9jb21wb25lbnRzL21lbW9yeURpc3BsYXknCmltcG9ydCBjb3VudGVyIGZyb20gJy4vY29tcG9uZW50cy9jb3VudGVyJwppbXBvcnQgdmlzIGZyb20gJy4vY29tcG9uZW50cy92aXMnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwcCcsCiAgY29tcG9uZW50czogewogICAgbWVtb3J5Rm9ybSwKICAgIG1lbW9yeURpc3BsYXksCiAgICBjb3VudGVyLAogICAgdmlzCiAgfSwKCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBtb3VudGVkOiBmYWxzZSwKICAgICAgZGltZW5zaW9uczoge3dpZHRoOiAwLCBoZWlnaHQ6IDAsIHRvcDogMjAsIHJpZ2h0OiA1MCwgYm90dG9tOiA1MCwgbGVmdDogNTB9LAogICAgICBjb3VudHJpZXM6IG51bGwsCiAgICAgIGN1cnJlbnRDb3VudHJ5OiAiR2VybWFueSIsCiAgICAgIG92ZXJsYXk6IGZhbHNlLAoKICAgICAgZGlzcGxheU1lbW9yeTogewogICAgICAgIGRpc3BsYXk6IGZhbHNlLAogICAgICAgIGN1cnJlbnQ6IG51bGwKICAgICAgfSwKICAgICAgbmV3TWVtb3J5OiB7CiAgICAgICAgc2hvd0xpbmU6IGZhbHNlLAogICAgICAgIHNob3dGb3JtOiBmYWxzZSwKICAgICAgICBkYXRlOiAiIgogICAgICAgIC8vZGF0ZTogIjIwMjAtMDItMjMiIC8vdG8gcXVpY2tlciB0ZXN0IGZvcm0KICAgICAgfQogICAgfQogIH0sCgogIGFzeW5jQ29tcHV0ZWQ6IHsKICAgIGFzeW5jIGNhc2VzKCkgewogICAgICByZXR1cm4gKGF3YWl0IGNhc2VTZXJ2aWNlLmdldENhc2VzKHtjb3VudHJ5OiB0aGlzLmN1cnJlbnRDb3VudHJ5LCBtZXRyaWM6ICJyZWxhdGl2ZV9jYXNlcyJ9KSkuZGF0YQogICAgfSwKICAgIGFzeW5jIG1lbW9yaWVzKCkgewogICAgICByZXR1cm4gKGF3YWl0IG1lbW9yeVNlcnZpY2UuZ2V0TWVtb3JpZXMoe2NvdW50cnk6IHRoaXMuY3VycmVudENvdW50cnl9KSkuZGF0YQogICAgfQogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgdGhpcy5yZXNpemUpOwogIH0sCgogIGFzeW5jIG1vdW50ZWQgKCkgewogICAgdGhpcy5jb3VudHJpZXMgPSAoYXdhaXQgY2FzZVNlcnZpY2UuZ2V0Q291bnRyaWVzKCkpLmRhdGEubWFwKGUgPT4gZS5jb3VudHJ5KQogICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICB0aGlzLnJlc2l6ZSgpCiAgICAgIHRoaXMubW91bnRlZCA9IHRydWU7CiAgICB9KQogfSwKCiAgbWV0aG9kczogewogICAgcmVzaXplOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5kaW1lbnNpb25zLndpZHRoID0gd2luZG93LmlubmVyV2lkdGgKICAgICAgdGhpcy5kaW1lbnNpb25zLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodAogICAgfSwKCiAgICBzaG93TWVtb3J5OiBmdW5jdGlvbihtZW1vcnkpIHsKICAgICAgaWYobWVtb3J5KSB7CiAgICAgICAgVnVlLnNldCh0aGlzLm1lbW9yaWVzW3RoaXMubWVtb3JpZXMuZmluZEluZGV4KGUgPT4gZS5pZCA9PSBtZW1vcnkuaWQpXSwnYWN0aXZlJyx0cnVlKQogICAgICAgIFZ1ZS5zZXQodGhpcy5kaXNwbGF5TWVtb3J5LCdtZW1vcnknLG1lbW9yeSkKICAgICAgICBWdWUuc2V0KHRoaXMuZGlzcGxheU1lbW9yeSwnZGlzcGxheScsdHJ1ZSkKICAgICAgICB0aGlzLm92ZXJsYXkgPSB0cnVlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgVnVlLnNldCh0aGlzLmRpc3BsYXlNZW1vcnksJ2Rpc3BsYXknLGZhbHNlKQogICAgICAgIFZ1ZS5zZXQodGhpcy5tZW1vcmllc1t0aGlzLm1lbW9yaWVzLmZpbmRJbmRleChlID0+IGUuYWN0aXZlKV0sJ2FjdGl2ZScsZmFsc2UpCiAgICAgICAgdGhpcy5vdmVybGF5ID0gZmFsc2UKICAgICAgfQogICAgfSwKCiAgICBzaG93TGluZTogZnVuY3Rpb24oc2hvdykgewogICAgICBWdWUuc2V0KHRoaXMubmV3TWVtb3J5LCdzaG93TGluZScsc2hvdykKICAgIH0sCgogICAgdG9nZ2xlRm9ybTogZnVuY3Rpb24oZXZlbnQpIHsgLy91c2luZyBhbiBvd24gbWV0aG9kIGluc3RlYWQgb2YgaW5saW5lIGFzc2lnbm1lbnQgdG8gc3RheSBzYW5lCiAgICAgIGlmKGV2ZW50KSB7CiAgICAgICAgVnVlLnNldCh0aGlzLm5ld01lbW9yeSwnZGF0ZScsZXZlbnQpCiAgICAgICAgVnVlLnNldCh0aGlzLm5ld01lbW9yeSwnc2hvd0xpbmUnLGZhbHNlKQogICAgICAgIFZ1ZS5zZXQodGhpcy5uZXdNZW1vcnksJ3Nob3dGb3JtJyx0cnVlKQogICAgICAgIHRoaXMub3ZlcmxheSA9IHRydWUKICAgICAgfSBlbHNlIHsKICAgICAgICBWdWUuc2V0KHRoaXMubmV3TWVtb3J5LCdzaG93Rm9ybScsZmFsc2UpCiAgICAgICAgdGhpcy5vdmVybGF5ID0gZmFsc2UKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <v-app>\n    <div class=\"formWrapper\" v-if=\"newMemory.showForm\">\n      <memoryForm\n        :date=\"newMemory.date\"\n        :country=\"currentCountry\"\n        @close=\"toggleForm(false)\"\n        />\n    </div>\n    <div class=\"memoryWrapper\" v-if=\"displayMemory.display\">\n      <memoryDisplay\n        :memory=\"displayMemory.memory\"\n        @close=\"showMemory(false)\"\n      />\n    </div>\n    <div class=\"visWrapper\">\n      <vis\n        v-if=\"cases\"\n        :dimensions=\"dimensions\"\n\n        :cases=\"cases\"\n        :country=\"currentCountry\"\n        :memories=\"memories\"\n        :dateSelector=\"newMemory.showLine\"\n        :overlay=\"overlay\"\n        :active=\"displayMemory.memory\"\n        @showForm=\"toggleForm($event)\"\n        @showMemory=\"showMemory\"\n\n        />\n    </div>\n\n    <div class=\"introWrapper\">\n      <h1>corona diaries</h1>\n      <p>It did not happen over night, but everything is different now. What are your memories, experiences and feelings after living in a pandemic for <counter /> days?</p>\n      <v-select\n        v-if=\"countries\"\n        :items=\"countries\"\n        v-model=\"currentCountry\"\n        label=\"Your country\"\n        outlined\n        >\n      </v-select>\n      <v-btn\n        color=\"primary\"\n        outlined\n        block\n        @click=\"showLine(true)\"\n        >I have a memory</v-btn>\n    </div>\n  </v-app>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport AsyncComputed from 'vue-async-computed'\nVue.use(AsyncComputed)\n\nimport caseService from '@/services/caseService'\nimport memoryService from '@/services/memoryService'\n\nimport memoryForm from './components/memoryForm'\nimport memoryDisplay from './components/memoryDisplay'\nimport counter from './components/counter'\nimport vis from './components/vis'\n\nexport default {\n  name: 'App',\n  components: {\n    memoryForm,\n    memoryDisplay,\n    counter,\n    vis\n  },\n\n  data () {\n    return {\n      mounted: false,\n      dimensions: {width: 0, height: 0, top: 20, right: 50, bottom: 50, left: 50},\n      countries: null,\n      currentCountry: \"Germany\",\n      overlay: false,\n\n      displayMemory: {\n        display: false,\n        current: null\n      },\n      newMemory: {\n        showLine: false,\n        showForm: false,\n        date: \"\"\n        //date: \"2020-02-23\" //to quicker test form\n      }\n    }\n  },\n\n  asyncComputed: {\n    async cases() {\n      return (await caseService.getCases({country: this.currentCountry, metric: \"relative_cases\"})).data\n    },\n    async memories() {\n      return (await memoryService.getMemories({country: this.currentCountry})).data\n    }\n  },\n\n  created() {\n    window.addEventListener(\"resize\", this.resize);\n  },\n\n  async mounted () {\n    this.countries = (await caseService.getCountries()).data.map(e => e.country)\n    this.$nextTick(() => {\n      this.resize()\n      this.mounted = true;\n    })\n },\n\n  methods: {\n    resize: function() {\n      this.dimensions.width = window.innerWidth\n      this.dimensions.height = window.innerHeight\n    },\n\n    showMemory: function(memory) {\n      if(memory) {\n        Vue.set(this.memories[this.memories.findIndex(e => e.id == memory.id)],'active',true)\n        Vue.set(this.displayMemory,'memory',memory)\n        Vue.set(this.displayMemory,'display',true)\n        this.overlay = true\n      } else {\n        Vue.set(this.displayMemory,'display',false)\n        Vue.set(this.memories[this.memories.findIndex(e => e.active)],'active',false)\n        this.overlay = false\n      }\n    },\n\n    showLine: function(show) {\n      Vue.set(this.newMemory,'showLine',show)\n    },\n\n    toggleForm: function(event) { //using an own method instead of inline assignment to stay sane\n      if(event) {\n        Vue.set(this.newMemory,'date',event)\n        Vue.set(this.newMemory,'showLine',false)\n        Vue.set(this.newMemory,'showForm',true)\n        this.overlay = true\n      } else {\n        Vue.set(this.newMemory,'showForm',false)\n        this.overlay = false\n      }\n    }\n  }\n}\n</script>\n\n<style>\n@import url('https://fonts.googleapis.com/css2?family=Shippori+Mincho+B1:wght@800&display=swap');\n\n.introWrapper {\n  overflow:visible;\n  \n  //background: linear-gradient(90deg, rgba(255, 235, 198, .05) 0%, rgba(255, 235, 198, 1) 90%, rgba(255, 255, 255, 0) 100%);\n  padding: 0 100px 50px 20px;\n  font-family: 'Roboto Sans';\n  width: 33%;\n\n}\n\n.introWrapper p {\n  min-width: 200px;\n  max-width: 500px;}\n\nh1{\n  font-family: 'Shippori Mincho B1', serif;\n  font-size: 40px;\n  color: #FA5E2D;\n}\n\n\n.visWrapper {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n}\n\n\n#app {\n  //background: #FFEBC6;\n  min-height: 100%;\n  height: 100%\n}\n</style>\n"]}]}