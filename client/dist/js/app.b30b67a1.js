(function(t){function e(e){for(var n,o,i=e[0],c=e[1],u=e[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(m.length)m.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],n=!0,i=1;i<r.length;i++){var c=r[i];0!==a[c]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=r[0]))}return t}var n={},a={app:0},s=[];function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},1194:function(t,e,r){},"19ba":function(t,e,r){},2321:function(t,e,r){"use strict";var n=r("a7ec"),a=r("6351"),s=(r("871c"),r("2877")),o=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"05a4af3c",null);e["default"]=o.exports},"28cd":function(t,e,r){"use strict";r("2f4c")},"2f4c":function(t,e,r){},"3f1c":function(t,e,r){"use strict";r("b706")},4435:function(t,e,r){"use strict";r("b01d")},5535:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=r("8c4f"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app"},[r("router-view",{attrs:{foo:"bar"}})],1)},o=[],i=(r("159b"),r("b64b"),r("bc3a")),c=r.n(i),u=function(){return c.a.create({baseURL:"https://coroname.uber.space"})},l=r("1da1"),d=(r("96cf"),r("4de4"),r("caad"),r("2532"),r("d81d"),r("c740"),r("ac1f"),r("5319"),r("99af"),r("a434"),r("466d"),r("0481"),r("2f62")),m={getCases:function(t){return u().post("getCases",t)},getCountries:function(){return u().post("getCountries")}},h={sendMemory:function(t){return u().post("sendMemory",t)},getMemories:function(t){return u().post("getMemories",t)},upvoteMemory:function(t){return u().post("upvoteMemory",t)},flagMemory:function(t){return console.log("Service: ",t),u().post("flagMemory",t)},countryMemories:function(){return u().post("countryMemories")}},p={getContexts:function(t){return u().post("getContexts",t)},countryContexts:function(){return u().post("countryContexts")}},f=r("5698");n["default"].use(d["a"]);var v=f["r"]("%Y-%m-%d"),g=new d["a"].Store({state:{session:{},countries:[],currentCountry:"",currentMetric:"relative_cases",cases:[],memories:[],activeMemories:[],hashtags:[],activeHashtag:"",dimensions:{width:0,height:0,top:100,right:40,bottom:50,left:400},scales:{},newMemory:{showForm:!1,exactDate:!1,datepicker:!1,date:new Date("2021-01-01")}},getters:{activeMemories:function(t){return t.memories.filter((function(e){return t.activeMemories.includes(e.id)}))},beeswarm:function(t){if(!t.scales)return null;var e=t.cases.map((function(t){return{fx:t.x,fy:t.y,isMemory:!1,radius:4}})),r=f["m"]().domain([2,500]).range([10,5]),n=t.memories.map((function(e){var n=t.cases.findIndex((function(t){return t.dateString==e.dateString}));e.value=-1!==n?t.cases[n].value:0,e.isMemory=!0,e.x=t.scales.x(e.date),e.y=t.scales.y(e.value),e.radius=r(t.memories.length),e.scale=1;var a=function(t){return t+(Math.random()*e.radius/2-e.radius/4)},s=a(e.radius),o=a(e.radius),i=a(e.radius),c=a(e.radius);return e.d="\n          M 0 ".concat(-s,"\n          C ").concat(o/2," ").concat(-s," ").concat(o," ").concat(-o/2," ").concat(o," ",0,"\n          C ").concat(o," ").concat(i/2," ").concat(i/2," ").concat(i," ",0," ").concat(i,"\n          C ").concat(-c/2," ").concat(i," ").concat(-c," ").concat(c/2," ").concat(-c," ",0,"\n          C ").concat(-c," ").concat(-s/2," ").concat(-s/2," ").concat(-s," ",0," ").concat(-s,"\n        ").replace(/(\r\n|\n|\r)/gm,""),e}));if(n.length>0){for(var a=n.concat(e),s=f["g"](a).force("forceX",f["h"]((function(t){return t.x})).strength(.1)).force("forceY",f["i"]((function(t){return t.y})).strength(.1)).force("collide",f["d"]((function(t){return t.radius+t.radius/4}))),o=0;o<=50;o++)s.tick();return a}return[]},session:function(t){return t.session}},mutations:{setSession:function(t,e){t.session=e},setCases:function(t,e){t.cases=e},setCurrentCountry:function(t,e){t.currentCountry=e},setCountries:function(t,e){t.countries=e},setActiveHashtag:function(t,e){t.activeHashtag=e},setActiveMemories:function(t,e){if(null==e)t.activeMemories=[];else{var r=t.activeMemories.findIndex((function(t){return t==e}));-1===r?t.activeMemories.push(e):t.activeMemories.splice(r,1)}},setMemories:function(t,e){t.memories=e.map((function(t){var e=t.category?t.category:t.comment.match(/#[a-z]+/gi);return t.hashtag=e||null,t.date=v(t.dateString),t}))},setContext:function(t,e){console.log(),t.memories=e.map((function(t){var e=t.comment.match(/#[a-z]+/gi);return t.hashtag=e||null,t.date=v(t.dateString),t}))},addMemory:function(t,e){n["default"].set(t.memories,t.memories.length,e)},setDimensions:function(t,e){e.width&&(t.dimensions.width=e.width),e.height&&(t.dimensions.height=e.height),e.left&&(t.dimensions.left=e.left)},setScales:function(t){var e=t.dimensions,r=[0,f["k"]([50,f["k"](t.cases,(function(t){return t.value}))])],n=f["c"](t.cases,(function(t){return t.date})),a=f["n"]().domain(n).range([e.left,e.width-e.right]),s=f["l"]().domain(r).range([e.height-e.bottom-e.top,e.top]);t.scales={x:a,y:s}},toggleNewMemoryExactDate:function(t){t.newMemory.exactDate=!t.newMemory.exactDate},toggleNewMemoryDatepicker:function(t,e){t.newMemory.datepicker=null!=e?e:!t.newMemory.datepicker},setNewMemoryDate:function(t,e){t.newMemory.date=e},toggleForm:function(t,e){t.newMemory.showForm=null!=e?e:!t.newMemory.showForm},setHashtags:function(t,e){var r;r="contextual"==t.session.path?e.map((function(t){return t.category})):e.map((function(t){return t.comment.match(/#[a-z]+/gi)})).flat().filter((function(t){return t}));var n=r.reduce((function(t,e){return t[e]=(t[e]||0)+1,t}),{}),a=Object.keys(n).map((function(t){return{tag:t,occurences:n[t]}})).sort((function(t,e){return e.occurences-t.occurences})),s=f["l"]().domain(f["c"](a,(function(t){return t.occurences}))).range([8,15]);a.forEach((function(t){return t.size=s(t.occurences)})),t.hashtags=a}},actions:{setCases:function(t){return Object(l["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.getCases({country:t.state.currentCountry,metric:t.state.currentMetric});case 2:r=e.sent.data.map((function(t){return{dateString:t.d,date:v(t.d),value:t.v}})),t.commit("setCases",r),t.commit("setScales");case 5:case"end":return e.stop()}}),e)})))()},setMemories:function(t){return Object(l["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state.session,"contextual"!=r.path){e.next=7;break}return e.next=4,p.getContexts({attributes:[["date","dateString"],"country","category","comment",["index","id"]],country:t.state.currentCountry});case 4:n=e.sent.data,e.next=10;break;case 7:return e.next=9,h.getMemories({attributes:[["date","dateString"],"exactDate","country","comment","id"],country:t.state.currentCountry,flagged:!1});case 9:n=e.sent.data;case 10:t.commit("setMemories",n),t.commit("setHashtags",n);case 12:case"end":return e.stop()}}),e)})))()},setCountries:function(t){return Object(l["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("contextual"==t.state.session.path){e.next=6;break}return e.next=3,h.countryMemories();case 3:e.t0=e.sent.data,e.next=9;break;case 6:return e.next=8,p.countryContexts();case 8:e.t0=e.sent.data;case 9:return r=e.t0,console.log(t.state.session),e.next=13,m.getCountries();case 13:n=e.sent.data.map((function(t){var e=r.findIndex((function(e){return e.country==t.country})),n=-1!==e?r[e].count:0;return{name:t.country,n_memories:"World"!=t.country?n:r.map((function(t){return t.count})).reduce((function(t,e){return t+e}))}})),n.sort((function(t,e){return e.n_memories-t.n_memories})),t.commit("setCountries",n);case 16:case"end":return e.stop()}}),e)})))()},setCurrentCountry:function(t,e){t.commit("setCurrentCountry",e),t.dispatch("setCases"),t.dispatch("setMemories")},setDimensions:function(t,e){t.commit("setDimensions",e),t.commit("setScales")}}}),y={sendInteraction:function(t){var e=g.getters.session;return Object.keys(e).forEach((function(r){t[r]=e[r]})),u().post("sendInteraction",t)}},b=r("e1bd"),x={name:"App",components:{},data:function(){return{chosenPath:null}},watch:{},created:function(){var t=["embedded","separated","contextual"];this.chosenPath=t[Math.floor(3*Math.random())],this.$store.commit("setSession",{hash:Object(b["a"])(),path:this.chosenPath}),window.addEventListener("resize",this.resize),this.$store.dispatch("setCountries"),this.$store.dispatch("setCurrentCountry","World"),this.$store.commit("setSession",{hash:Object(b["a"])(),path:this.chosenPath}),window.addEventListener("beforeunload",this.endSession)},mounted:function(){var t=this;y.sendInteraction({event:"sessionStart"}),this.$nextTick((function(){t.resize()}))},methods:{resize:function(){var t=Math.min.apply(Math,[800,window.innerHeight]);this.$store.dispatch("setDimensions",{width:window.innerWidth,height:t,left:"separated"==this.chosenPath?600:400})},endSession:function(){y.sendInteraction({event:"sessionEnd"})}}},w=x,k=r("2877"),_=Object(k["a"])(w,s,o,!1,null,"a16afe6a",null),C=_.exports,S=r("ce5b"),M=r.n(S);r("bf40"),r("5363");n["default"].use(M.a);var D={icons:{iconfont:"mdi"},theme:{themes:{light:{primary:"#FA5E2D",secondary:"#b0bec5",anchor:"#8c9eff"},dark:!1}}},$=new M.a(D),T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("v-container",[r("v-data-table",{staticClass:"elevation-2",attrs:{headers:t.headers,items:t.memories,"items-per-page":25,"sort-by":"updatedAT","sort-desc":!0,dense:""},scopedSlots:t._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:""}},[r("v-toolbar-title",[t._v("Review Memories")]),r("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),r("v-spacer"),t.status?r("v-alert",{attrs:{type:"success",dense:""}},[t._v(t._s(t.status))]):t._e(),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-card-title",[t._v("Are you sure you want to re-approve this item?")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDialog}},[t._v("Cancel")]),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.approve}},[t._v("OK")]),r("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.updatedAT",fn:function(e){var r=e.item;return[t._v(" "+t._s(t.getDate(r.updatedAT))+" ")]}},{key:"item.reapprove",fn:function(e){var n=e.item;return[r("v-btn",{attrs:{icon:""},on:{click:function(e){return t.openDialog(n)}}},[r("v-icon",{attrs:{small:"",color:"black"}},[t._v(" mdi-flag-remove ")])],1)]}},{key:"no-data",fn:function(){return[r("v-btn",{attrs:{color:"primary",click:"initialize"}},[t._v(" Reset ")])]},proxy:!0}])})],1)],1)},I=[],A=r("3003");n["default"].use(A["a"]);var E={data:function(){return{headers:["id","updatedAT","comment","reapprove"].map((function(t){return{text:t,value:t}})),memories:[],counter:0,dialog:!1,deleteIndex:-1,status:null}},asyncComputed:{asyncMemories:function(){return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h.getMemories({attributes:["id","updatedAT","comment"],flagged:!0});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})))()}},methods:{openDialog:function(t){this.dialog=!0,this.deleteIndex=t.id},closeDialog:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedIndex=-1}))},approve:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{h.flagMemory({id:t.deleteIndex,flagged:!1}).then((function(e){200==e.status&&(n["default"].delete(t.memories,t.memories.findIndex((function(e){return e.id==t.deleteIndex}))),t.status="Item ".concat(t.deleteIndex," was successfully re-approved."),t.closeDialog())}))}catch(r){console.log(r)}case 1:case"end":return e.stop()}}),e)})))()},getDate:function(t){var e=new Date(t),r=e.getFullYear()+"/"+e.getMonth()+"/"+e.getDay();return r}},watch:{asyncMemories:function(t){this.memories=t}}},W=E,j=Object(k["a"])(W,T,I,!1,null,"4b6e3650",null),F=j.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{style:[t.consent?{position:"static"}:{position:"fixed"}]},[t.cases&&t.memories&&t.countries&&t.mounted?[n("ul",{staticClass:"stepnavi"},t._l(t.steps,(function(e,r){return n("li",{key:r},[r==t.currentStepId-1?n("span",[t._v("●")]):n("span",[t._v("○")])])})),0),t.consent?n("survey",{attrs:{display:t.testPath}}):t._e(),n("Scrollama",{staticClass:"scrollama",attrs:{progress:!0,debug:!1},on:{"step-enter":t.stepEnterHandler,"step-progress":t.stepProgressHandler}},["embedded"==t.testPath?[n("div",{staticClass:"visWrapper",attrs:{slot:"graphic"},slot:"graphic"},[n("vis",{attrs:{progress:t.progress,consent:t.consent,display:t.testPath},on:{demoClick:t.highlightConsent}})],1),n("div",{staticClass:"introWrapper w400",style:{width:t.dimensions.left},attrs:{"data-step":"1"}},[n("h1",[t._v("corona"),n("br"),n("span",[t._v("memories")])]),n("p",{staticClass:"larger"},[t._v("How do we remember the pandemic?")]),n("p",[t._v("Since it started "),n("strong",[t._v("about "),n("counter"),t._v(" days")],1),t._v(" ago we are confronted with charts about new cases daily. But what are the human stories behind the numbers?")]),n("p",{staticClass:"smaller"},[t._v("The research is conducted by Tobias Kauer (University of Edinburgh), Benjamin Bach (University of Edinburgh), and Marian Dörk (Potsdam University of Applied Sciences). It has been granted approval by the ethics committee. By clicking the button, you indicate that you are a speaker of English and at least 18 years old. You have read the "),n("router-link",{attrs:{to:"/participantSheet"}},[t._v("information letter")]),t._v(" and you voluntarily agree to participate, and understand you can stop your participation at any time. You agree that your anonymous data may be kept permanently in Edinburgh University archived and may be used by qualified researchers for teaching and research purposes.")],1),n("v-btn",{staticClass:"transition-swing",attrs:{elevation:t.clickedDemo?10:0,color:"primary",outlined:""},on:{click:function(e){return t.enter("#progressTarget")}}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-check-circle")]),t._v(" I agree, show me ")],1),t.clickedDemo&&!t.consent?n("p",[t._v("Please consent first.")]):t._e(),n("p",{staticStyle:{"margin-top":"15px"}},[n("a",{attrs:{href:"https://www.designinformatics.org/",target:"_blank"}},[n("img",{staticClass:"logo",staticStyle:{width:"200px"},attrs:{src:r("9a1b")}})]),n("br"),n("a",{attrs:{href:"https://uclab.fh-potsdam.de/",target:"_blank"}},[n("img",{staticClass:"logo",staticStyle:{width:"40%"},attrs:{src:r("d5b1")}})])])],1),n("div",{staticClass:"animatorWrapper",style:[t.consent?{height:"100vh"}:{height:0}]}),n("div",{staticClass:"explorationWrapper w400",style:[t.consent?{height:"100vh"}:{height:0}],attrs:{id:"progressTarget","data-step":"2"}},[t.consent?n("explore",{attrs:{display:"embedded"},on:{toggleForm:t.toggleForm}}):t._e()],1),n("div",{staticClass:"formWrapper w400",style:[t.consent?{height:"90vh"}:{height:0}],attrs:{id:"addTarget","data-step":"3"}},[t.consent&&t.newMemory.showForm?n("memoryForm",{on:{close:function(e){return t.toggleForm(!1)}}}):t._e()],1)]:"separated"==t.testPath?[n("div",{staticClass:"visWrapper",attrs:{slot:"graphic"},slot:"graphic"},[n("vis",{attrs:{progress:t.progress,consent:t.consent,display:t.testPath}})],1),n("div",{staticClass:"introWrapper w600",attrs:{"data-step":"1"}},[n("h1",[t._v("corona"),n("br"),n("span",[t._v("memories")])]),n("p",{staticClass:"larger"},[t._v("How do we remember the pandemic?")]),n("p",[t._v("Since the start of the pandemic "),n("strong",[t._v("about "),n("counter"),t._v(" days")],1),t._v(" ago we are confronted with charts about new cases daily. But what are the human stories behind the numbers?")]),n("p",{staticClass:"smaller"},[t._v("The research is conducted by Tobias Kauer (University of Edinburgh), Benjamin Bach (University of Edinburgh), and Marian Dörk (Potsdam University of Applied Sciences). It has been granted approval by the ethics committee. By clicking the button, you indicate that you are a speaker of English and at least 18 years old. You have read the "),n("router-link",{attrs:{to:"/participantSheet"}},[t._v("information letter")]),t._v(" and you voluntarily agree to participate, and understand you can stop your participation at any time. You agree that your anonymous data may be kept permanently in Edinburgh University archived and may be used by qualified researchers for teaching and research purposes.")],1),n("v-btn",{staticClass:"transition-swing",attrs:{elevation:t.clickedDemo?10:0,color:"primary",outlined:""},on:{click:function(e){return t.enter("#progressTarget")}}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-check-circle")]),t._v(" I agree, show me ")],1),n("p",{staticStyle:{"margin-top":"15px"}},[n("a",{attrs:{href:"https://www.designinformatics.org/",target:"_blank"}},[n("img",{staticClass:"logo",staticStyle:{width:"200px"},attrs:{src:r("9a1b")}})]),n("br"),n("a",{attrs:{href:"https://uclab.fh-potsdam.de/",target:"_blank"}},[n("img",{staticClass:"logo",staticStyle:{width:"40%"},attrs:{src:r("d5b1")}})])])],1),n("div",{staticClass:"explorationWrapper w600",style:[t.consent?{"min-height":"100vh"}:{height:0}],attrs:{id:"progressTarget","data-step":"2"}},[n("explore",{attrs:{display:"list"},on:{toggleForm:t.toggleForm}}),n("memoryList"),n("v-btn",{staticStyle:{width:"99%"},attrs:{block:"",color:"primary",elevation:"2"},on:{click:t.toggleForm}},[n("v-icon",{staticStyle:{"margin-right":"5px"}},[t._v("mdi-tooltip-plus-outline")]),t._v("Add your story ")],1)],1),n("div",{staticClass:"formWrapper",style:[t.consent?{height:"90vh"}:{height:0}],attrs:{id:"addTarget","data-step":"3"}},[t.newMemory.showForm?n("memoryForm",{attrs:{display:t.testPath},on:{close:function(e){return t.toggleForm(!1)}}}):t._e()],1)]:"contextual"==t.testPath?[n("div",{staticClass:"visWrapper",attrs:{slot:"graphic"},slot:"graphic"},[n("vis",{attrs:{progress:t.progress,consent:t.consent,display:t.testPath},on:{demoClick:t.highlightConsent}})],1),n("div",{staticClass:"introWrapper w400",attrs:{"data-step":"1"}},[n("h1",[t._v("corona"),n("br"),n("span",[t._v("memories")])]),n("p",{staticClass:"larger"},[t._v("What are the measures & policy responses connected to data about the pandemic?")]),n("p",[t._v("Since the start of the pandemic "),n("strong",[t._v("about "),n("counter"),t._v(" days")],1),t._v(" ago, we are confronted with charts about new cases or even deaths. What are the events behind the numbers?")]),n("p",{staticClass:"smaller"},[t._v("The research is conducted by Tobias Kauer (University of Edinburgh), Benjamin Bach (University of Edinburgh), and Marian Dörk (Potsdam University of Applied Sciences). It has been granted approval by the ethics committee. By clicking the button, you indicate that you are a speaker of English and at least 18 years old. You have read the "),n("router-link",{attrs:{to:"/participantSheet"}},[t._v("information letter")]),t._v(" and you voluntarily agree to participate, and understand you can stop your participation at any time. You agree that your anonymous data may be kept permanently in Edinburgh University archived and may be used by qualified researchers for teaching and research purposes.")],1),n("v-btn",{staticClass:"transition-swing",attrs:{elevation:t.clickedDemo?10:0,color:"primary",outlined:""},on:{click:function(e){return t.enter("#progressTarget")}}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-check-circle")]),t._v(" I agree, show me ")],1),t.clickedDemo&&!t.consent?n("p",[t._v("Please consent first.")]):t._e(),n("p",{staticStyle:{"margin-top":"15px"}},[n("a",{attrs:{href:"https://www.designinformatics.org/",target:"_blank"}},[n("img",{staticClass:"logo",staticStyle:{width:"200px"},attrs:{src:r("9a1b")}})]),n("br"),n("a",{attrs:{href:"https://uclab.fh-potsdam.de/",target:"_blank"}},[n("img",{staticClass:"logo",staticStyle:{width:"40%"},attrs:{src:r("d5b1")}})])])],1),n("div",{staticClass:"animatorWrapper",style:[t.consent?{height:"100vh"}:{height:0}]}),n("div",{staticClass:"explorationWrapper w400",style:[t.consent?{height:"100vh"}:{height:0}],attrs:{id:"progressTarget","data-step":"2"}},[t.consent?n("explore",{attrs:{display:t.testPath},on:{toggleForm:t.toggleForm}}):t._e()],1),n("div",{staticClass:"formWrapper w400",style:[t.consent?{height:"100vh"}:{height:0}],attrs:{id:"addTarget","data-step":"3"}},[t.consent&&t.newMemory.showForm?n("memoryForm",{on:{close:function(e){return t.toggleForm(!1)}}}):t._e()],1)]:t._e()],2)]:[n("v-card",{staticClass:"d-flex justify-center mb-6",staticStyle:{"margin-top":"100px"},attrs:{color:"rgb(255, 0, 0, 0.0)",elevation:"0"}},[n("v-progress-circular",{attrs:{size:300,indeterminate:"",color:"primary"}},[t._v("Loading ..."),n("br"),t._v("try refresing?")])],1)]],2)},P=[],H=(r("cb29"),r("b0c0"),r("5abe"),r("a57f")),R=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{staticClass:"mx-left",staticStyle:{margin:"0px"},attrs:{elevation:"2","min-width":"400","max-width":"560",id:"top",light:""}},[t.returnID?r("v-card-text",{staticStyle:{"padding-top":"0px"}},[r("v-card-title",{staticClass:"ma-0",staticStyle:{"padding-left":"0"}},[t._v(" Your story has been recorded. "),r("v-spacer"),r("v-btn",{attrs:{icon:""},on:{click:t.close}},[r("v-icon",{attrs:{center:"",color:"lightgrey",small:""}},[t._v("mdi-close-circle")])],1)],1),r("p",[r("strong",[t._v("It will be visible soon.")]),t._v(" In the meantime, if you have a minute and want to help our research, please consider filling out our "),r("a",{attrs:{href:"https://docs.google.com/forms/d/e/1FAIpQLSfydTg7ZpZG21s9in4M-mM_8BxA5mZm73K2p5KDshaAcRipgA/viewform?entry.62570228="+t.returnID,target:"_blank"}},[t._v("survey")]),t._v(". ")]),r("hr",{staticStyle:{"margin-bottom":"10px"}}),r("v-form",[r("p",[r("strong",[t._v("What do you find most interesting in this visualization?")])]),t._l(t.checkboxes,(function(e){return r("v-checkbox",{key:e.key,staticClass:"ma-0 pa-0",attrs:{value:"1",dense:"",label:e.text,type:"checkbox"},model:{value:e.checked,callback:function(r){t.$set(e,"checked",r)},expression:"checkbox.checked"}})})),r("v-textarea",{attrs:{name:"input-7-1",label:"",outlined:"",hint:"Can you elaborate?"},model:{value:t.other,callback:function(e){t.other=e},expression:"other"}})],2),t.surveyStatus?[r("v-alert",{attrs:{text:"",type:t.surveyStatus.type}},[t._v(" "+t._s(t.surveyStatus.text)+" ")])]:[r("v-btn",{staticStyle:{"margin-bottom":"100px"},attrs:{block:"",color:"primary",outlined:""},on:{click:t.sendSurvey}},[t._v("Submit ")])],r("v-btn",{staticStyle:{"margin-top":"10px"},attrs:{small:"",plain:"",color:"primary",block:""},on:{click:t.blankify}},[t._v("Add another story first")])],2):r("v-card-text",{staticStyle:{"padding-top":"0px"}},[r("v-card-title",{staticClass:"ma-0",staticStyle:{"padding-left":"0"}},[t._v(" Add your story to the chart "),r("v-spacer"),r("v-btn",{attrs:{icon:""},on:{click:t.close}},[r("v-icon",{attrs:{center:"",color:"lightgrey",small:""}},[t._v("mdi-close-circle")])],1)],1),r("v-form",{staticStyle:{padding:"10px 0"},model:{value:t.isFormValid,callback:function(e){t.isFormValid=e},expression:"isFormValid"}},[r("v-textarea",{staticClass:"ma-0 pa-0",attrs:{dense:"",outlined:"",rules:t.rules.notEmpty,label:"Your Story"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),t.hashtags&&t.showHashtags>0?r("p",{staticClass:"hashtags"},[t._v(" Add these (or other) hashtags"),r("br"),t._l(t.hashtags.filter((function(e,r){return r<t.showHashtags})).sort((function(t,e){return t.tag.localeCompare(e.tag)})),(function(e,n){return r("v-chip",{key:"hashtag-"+n,style:{margin:"2px"},attrs:{small:"",color:"primary",outlined:!t.comment.includes(e.tag)},on:{click:function(r){return t.addTag(e.tag)}}},[t._v(t._s(e.tag)+" ")])})),t.hashtags.length>=t.showHashtags?r("a",{on:{click:function(e){t.showHashtags=t.showHashtags+5}}},[t._v("show more")]):t._e()],2):t._e(),r("v-autocomplete",{attrs:{items:t.countries,dense:"",label:"Your country",outlined:""},model:{value:t.currentCountry,callback:function(e){t.currentCountry=e},expression:"currentCountry"}}),this.exactDate?[r("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[r("v-text-field",t._g(t._b({staticClass:"ma-0",attrs:{rules:t.rules.notEmpty,label:"Pick a date","append-icon":"mdi-calendar",outlined:"",readonly:"",dense:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},"v-text-field",a,!1),n))]}}]),model:{value:t.datepicker,callback:function(e){t.datepicker=e},expression:"datepicker"}},[r("v-date-picker",{on:{input:function(e){t.datepicker=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)]:[r("v-text-field",{staticClass:"ma-0",attrs:{label:"Date",outlined:"",dense:"",hint:"Move your mouse over the line to pick a date",readonly:""},model:{value:t.roughDate,callback:function(e){t.roughDate=e},expression:"roughDate"}})],r("v-checkbox",{staticClass:"ma-0",attrs:{label:"Use exact date"},model:{value:t.exactDate,callback:function(e){t.exactDate=e},expression:"exactDate"}})],2),r("v-btn",{staticStyle:{margin:"10px 0"},attrs:{disabled:!t.isFormValid,block:"",color:"primary",outlined:""},on:{click:t.sendMemory}},[t._v("Send")])],1)],1)},Y=[],N=(r("a15b"),{sendSurvey:function(t){var e=g.getters.session;return Object.keys(e).forEach((function(r){t[r]=e[r]})),u().post("sendSurvey",t)}}),B={data:function(){return{panel:null,comment:"",name:"",parseDate:f["r"]("%Y-%m-%d"),formatDate:f["p"]("%Y-%m-%d"),datepicker:!1,showHashtags:0,showDatehelp:!1,surveyStatus:null,roughDate:null,initial:0,returnID:null,isFormValid:!1,checkboxes:[{text:"Reading other people’s story inspired me to share.",key:"inspiredByOthers",checked:!1},{text:"It feels good to talk about this.",key:"feelsGood",checked:!1},{text:"Because I think my story can help others.",key:"helpOthers",checked:!1},{text:"None of the above (please describe below)",key:"none",checked:!1}],other:"Can you elaborate?",rules:{notEmpty:[function(t){return!!t||"Please enter a memory!"}]}}},props:{country:String,display:String},computed:{session:function(){return this.$store.getters.session.hash},hashtags:function(){var t=this.$store.state.hashtags;return t.length<5&&(t=t.concat(["lockdown","stayhome","socialdistancing","quarantine","covid"].map((function(t){return{occurences:0,size:10,tag:"#"+t}})))),t},countries:function(){return this.$store.state.countries.map((function(t){return{text:"World"==t.name?"(Select your country)":t.name,value:t.name,disabled:"World"==t.name}}))},currentCountry:{get:function(){return this.$store.state.currentCountry},set:function(t){this.$store.dispatch("setCurrentCountry",t),y.sendInteraction({event:"select-country",element:t})}},exactDate:{set:function(){this.$store.commit("toggleNewMemoryExactDate")},get:function(){return"separated"==this.display||this.$store.state.newMemory.exactDate}},date:{set:function(t){this.$store.commit("setNewMemoryDate",this.parseDate(t))},get:function(){return this.formatDate(this.$store.state.newMemory.date)}},displayDate:{set:function(t){console.log(t)},get:function(){return console.log(this.date),this.exactDate?this.formatDate(this.date):this.getRoughDate(this.date)}}},mounted:function(){},methods:{addTag:function(t){this.comment=this.comment+" "+t},getRoughDate:function(t){var e=new Date(t),r="Late";e.getDate()<=20&&(r="Mid"),e.getDate()<=10&&(r="Early");var n=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()];return r+" "+n+" "+e.getFullYear()},sendMemory:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return y.sendInteraction({event:"sendMemory"}),t.loading=!0,r={comment:t.comment,date:new Date(t.date),hash:t.$store.state.session.hash,country:t.currentCountry,exactDate:t.exactDate},e.prev=3,e.next=6,h.sendMemory(r);case 6:n=e.sent,200==n.status&&(t.$store.commit("toggleNewMemoryDatepicker",!1),t.$store.dispatch("setMemories"),t.returnID=n.data.id,t.$vuetify.goTo("#top",{duration:500})),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](3),console.log(e.t0),t.status=e.t0.response.data.error;case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))()},sendSurvey:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={survey:"submitting",checkboxes:t.checkboxes.filter((function(t){return t.checked})).map((function(t){return t.key})).join(),comment:"Can you elaborate?"!=t.other?t.other:""},e.prev=1,e.next=4,N.sendSurvey(r);case 4:n=e.sent,200==n.status&&(t.surveyStatus={type:"success",text:"Thank you! Your response was recorded."}),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),console.log(e.t0),t.surveyStatus={type:"error",text:"Sorry, there was a problem."};case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})))()},close:function(){this.$store.commit("toggleNewMemoryDatepicker",!1),this.returnID=null,this.surveyStatus=null,this.$emit("close")},blankify:function(){this.returnID=null,this.comment="",this.$store.commit("toggleNewMemoryDatepicker",!0)}},watch:{comment:function(t){t.length>2&&this.showHashtags<10&&(this.showHashtags=10),console.log();var e=t.match(/#[a-z]+/gi);e&&console.log(e)},date:{immediate:!0,deep:!0,handler:function(){this.roughDate=this.getRoughDate(this.date)}}}},z=B,U=(r("3f1c"),Object(k["a"])(z,R,Y,!1,null,"0ebf2172",null)),L=U.exports,K=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"memoryList"},[t.orderedMemories.length>1?r("div",{staticStyle:{"text-align":"right","margin-right":"1%"}},[r("v-btn",{attrs:{text:""},on:{click:function(e){return t.changeSort("date")}}},[t._v("date "+t._s(t.desc?"↑":"↓"))])],1):t._e(),r("transition-group",{attrs:{name:"list",tag:"ul"}},t._l(t.orderedMemories,(function(t,e){return r("li",{key:"memory-li-"+e,staticClass:"item"},[r("memoryCard",{attrs:{memory:t,display:"separated"}})],1)})),0)],1)},q=[],J=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.memory?r("v-card",{staticClass:"memoryCard overflow-y-auto",attrs:{elevation:"2",width:t.width}},[r("div",["separated"!=t.display?r("v-btn",{staticStyle:{position:"absolute",right:"5px",top:"0px"},attrs:{icon:""},on:{click:t.close}},[r("v-icon",{attrs:{small:"",color:"black"}},[t._v("mdi-close-circle")])],1):t._e()],1),r("v-card-text",[r("v-row",{attrs:{dense:""}},[r("v-col",{attrs:{cols:"12"}},[r("p",{staticClass:"topBar"},["contextual"!=t.display?r("em",[t._v(" [anonymous], "+t._s(t.displayDate)+", "+t._s(t.memory.country))]):r("em",[t._v(t._s(t.displayDate)+", "+t._s(t.memory.country))]),"separated"==t.display?[r("div",{staticStyle:{position:"absolute",right:"5px",top:"5px"}},[t.status?[t._v(" "+t._s(t.status)+" ")]:[r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[r("v-btn",t._g(t._b({attrs:{plain:"","x-small":""},on:{click:t.report}},"v-btn",a,!1),n),[r("v-icon",{attrs:{"x-small":""}},[t._v("mdi-flag")]),t._v(" "+t._s(t.reportText)+" ")],1)]}}],null,!1,1490797939)},[r("span",[t._v("Click to report hurtful or other problematic submissions.")])])]],2)]:t._e()],2),r("p",{ref:"comment",staticClass:"comment"},[t._v(t._s(t.memory.comment))]),"separated"!=t.display?[t.status?[t._v(" "+t._s(t.status)+" ")]:[r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[r("v-btn",t._g(t._b({attrs:{plain:"","x-small":""},on:{click:t.report}},"v-btn",a,!1),n),[r("v-icon",{attrs:{"x-small":""}},[t._v("mdi-flag")]),t._v(" "+t._s(t.reportText)+" ")],1)]}}],null,!1,1490797939)},[r("span",[t._v("Click to report hurtful or other problematic submissions.")])])]]:t._e()],2)],1)],1)],1):t._e()},G=[],V=(r("a9e3"),{data:function(){return{status:null,weight:null,reportText:"Report",reportClickCount:0,liked:!1}},props:{memory:Object,width:Number,display:String},created:function(){this.weight=this.memory.weight},mounted:function(){},computed:{localMemory:function(){return this.memory?this.memory:null},displayDate:function(){return"contextual"==this.display||this.memory.exactDate?this.memory.dateString:this.getRoughDate(this.memory.date)}},methods:{close:function(){y.sendInteraction({event:"close",element:this.memory.id}),this.$store.commit("setActiveMemories",this.memory.id)},mouseOver:function(t){t&&!this.liked?this.weight="+1":this.weight=this.localMemory.weight},getRoughDate:function(t){var e=new Date(t),r="Late ";e.getDate()<=20&&(r="Mid "),e.getDate()<=10&&(r="Early ");var n=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],a=" "+e.getFullYear();return r+n+a},report:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0==t.reportClickCount)t.reportText="Click again to report this story to the website admin.",t.reportClickCount++;else{y.sendInteraction({event:"report",element:t.memory.id});try{h.flagMemory({id:t.memory.id,flagged:!0}).then((function(e){200==e.status&&(t.status="Thank you. We will not show this story again until we reviewed it.",setTimeout((function(){t.close()}),5e3))}))}catch(r){console.log(r)}}case 1:case"end":return e.stop()}}),e)})))()}}}),X=V,Z=(r("71ab"),Object(k["a"])(X,J,G,!1,null,"3d2e26be",null)),Q=Z.exports,tt={components:{memoryCard:Q},data:function(){return{sort:"date",desc:!0}},computed:{hashtag:function(){return this.$store.state.activeHashtag},memories:function(){return this.$store.state.memories},orderedMemories:function(){var t=this;if(!this.memories)return null;var e=this.memories;return this.hashtag&&(e=e.filter((function(e){return e.hashtag&&e.hashtag.includes(t.hashtag)}))),e.sort((function(e,r){return"date"==t.sort?new Date(r.date)-new Date(e.date):r.weight-e.weight})),"date"==this.sort&&this.desc&&e.reverse(),e}},mounted:function(){},methods:{changeSort:function(t){"date"==t?(this.sort="date",this.desc=!this.desc):this.sort="weight"}}},et=tt,rt=(r("6a68"),Object(k["a"])(et,K,q,!1,null,"65a0821c",null)),nt=rt.exports,at=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",["list"==t.display?r("div",[r("v-btn",{attrs:{block:"",color:"primary",elevation:"2"},on:{click:function(e){return t.$emit("toggleForm")}}},[r("v-icon",{staticStyle:{"margin-right":"5px"}},[t._v("mdi-tooltip-plus-outline")]),t._v("Add your story ")],1),t._m(0)],1):"embedded"==t.display?r("p",[r("strong",[t._v("Click the bubbles to read people’s stories.")]),r("br"),t._v("Select countries or hashtags to filter.")]):r("p",[t._v("Select a country to see measures and responses.")]),r("v-autocomplete",{attrs:{items:t.countries,label:"Your country",outlined:""},model:{value:t.currentCountry,callback:function(e){t.currentCountry=e},expression:"currentCountry"}}),t.hashtags?r("p",{staticClass:"hashtags"},t._l(t.hashtags.filter((function(t,e){return e<10})).sort((function(t,e){return t.tag.localeCompare(e.tag)})),(function(e,n){return r("v-chip",{key:"hashtag-"+n,style:{fontSize:e.size+"px",margin:"2px"},attrs:{small:"",color:"primary",outlined:t.activeHashtag!=e.tag},on:{click:function(r){t.activeHashtag=e.tag}}},[t._v(t._s(e.tag)+" ")])})),1):t._e(),"embedded"==t.display?r("div",[r("v-btn",{attrs:{color:"primary",elevation:"2"},on:{click:function(e){return t.$emit("toggleForm")}}},[r("v-icon",{staticStyle:{"margin-right":"5px"}},[t._v("mdi-tooltip-plus-outline")]),t._v("Add your story ")],1),r("v-btn",{staticStyle:{"margin-top":"10px"},attrs:{color:"primary",outlined:"",small:"",elevation:"2"},on:{click:t.randomMemory}},[r("v-icon",{staticStyle:{"margin-right":"5px"},attrs:{small:""}},[t._v("mdi-message-text")]),t._v("Show random memory ")],1),r("br"),t.$store.state.activeMemories.length>0?r("v-btn",{attrs:{plain:"","x-small":""},on:{click:t.hideMemories}},[t._v("Hide all")]):t._e()],1):"contextual"==t.display?r("div",[r("v-btn",{staticStyle:{"margin-top":"10px"},attrs:{color:"primary",outlined:"",small:"",elevation:"2"},on:{click:t.randomMemory}},[r("v-icon",{staticStyle:{"margin-right":"5px"},attrs:{small:""}},[t._v("mdi-message-text")]),t._v("Show random ")],1),r("br"),t.$store.state.activeMemories.length>0?r("v-btn",{attrs:{plain:"","x-small":""},on:{click:t.hideMemories}},[t._v("Hide all")]):t._e()],1):t._e()],1)},st=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",{staticStyle:{"margin-top":"20px"}},[r("strong",[t._v("Select countries or hashtags to filter memories.")])])}],ot={name:"App",components:{},props:{display:String},data:function(){return{}},computed:{memories:function(){return this.$store.state.memories},activeMemories:function(){return this.$store.getters.activeMemories},countries:function(){return this.$store.state.countries.map((function(t){return{text:t.name+" ("+t.n_memories+")",value:t.name}}))},hashtags:function(){return this.$store.state.hashtags},currentCountry:{get:function(){return this.$store.state.currentCountry},set:function(t){this.$store.dispatch("setCurrentCountry",t),y.sendInteraction({event:"select-country",element:t})}},activeHashtag:{get:function(){return this.$store.state.activeHashtag},set:function(t){t==this.activeHashtag?(y.sendInteraction({event:"unselect-hashtag",element:t}),this.$store.commit("setActiveHashtag",null)):(y.sendInteraction({event:"select-hashtag",element:t}),this.$store.commit("setActiveHashtag",t))}}},mounted:function(){},methods:{randomMemory:function(){var t=this;y.sendInteraction({event:"randomMemory"});var e=this.memories.map((function(t){return t.id})).filter((function(e){return!t.activeMemories.map((function(t){return t.id})).includes(e)})),r=e[Math.floor(Math.random()*e.length)];null!=r&&this.$store.commit("setActiveMemories",r)},hideMemories:function(){y.sendInteraction({event:"hideMemories"}),this.$store.commit("setActiveMemories",null)}}},it=ot,ct=(r("4435"),Object(k["a"])(it,at,st,!1,null,"0c222d37",null)),ut=ct.exports,lt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wrapper",style:"top: "+t.position+"px"},[r("v-row",{attrs:{justify:"end"}},[r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-card",{staticStyle:{"font-family":"'Roboto Slab', serif","margin-right":"30px"}},[r("v-card-text",{staticStyle:{"padding-top":"0"}},[r("div",{ref:"visibleSecond"},[r("p",{staticStyle:{cursor:"pointer",padding:"15px",margin:"0",color:"#FA5E2D","text-align":"center"},on:{click:function(e){t.activeStep="visibleThird"}}},[t._v("Help our research. "),r("strong",[t._v("Fill out the survey")])]),t.status?r("div",{staticStyle:{position:"absolute",right:"20px",top:"10px"}},[r("v-btn",{attrs:{icon:""},on:{click:t.close}},[r("v-icon",{attrs:{center:"",color:"lightgrey",small:""}},[t._v("mdi-close-circle")])],1)],1):t._e()]),r("hr",{staticStyle:{"margin-bottom":"10px"}}),r("div",{ref:"visibleThird"},[r("v-form",[r("p",[r("strong",[t._v("What do you find most interesting in this visualization?")])]),t._l(t.options,(function(e){return r("v-checkbox",{key:e.key,staticClass:"ma-0 pa-0",attrs:{value:"1",dense:"",label:e.response,type:"checkbox"},model:{value:e.checked,callback:function(r){t.$set(e,"checked",r)},expression:"option.checked"}})})),r("v-textarea",{attrs:{name:"input-7-1",label:"",outlined:"",hint:"Why is this interesting to you (optional)"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],2),t.status?[r("v-alert",{attrs:{text:"",type:t.status.type}},[t._v(" "+t._s(t.status.text)+" ")])]:[r("v-btn",{staticStyle:{"margin-bottom":"100px"},attrs:{block:"",color:"primary",outlined:""},on:{click:t.send}},[t._v("Submit ")])]],2)])],1)],1)],1)],1)},dt=[],mt={data:function(){return{timeBeforeDisplay:5e3,mounted:!1,activeStep:null,status:!1,comment:"Why is this interesting to you (optional)",options:[{response:"The case numbers and how they change over time.",key:"caseNumbers",checked:!1},{response:"The responses and how they relate to the numbers.",key:"responseRelation",checked:!1},{response:"Just the responses.",key:"justReponses",checked:!1},{response:"I do not find it interesting.",key:"nothing",checked:!1}]}},props:{display:String},computed:{session:function(){return this.$store.getters.session.hash},position:function(){if(!this.mounted)return null;if(status)return 0;var t=this.activeStep?this.$refs[this.activeStep].scrollHeight:0;return"visibleThird"==this.activeStep&&(t=t+this.$refs["visibleSecond"].scrollHeight+40),document.documentElement.clientHeight-t}},mounted:function(){var t=this;setTimeout((function(){return t.activeStep="visibleSecond"}),this.timeBeforeDisplay),this.$nextTick((function(){t.mounted=!0}))},methods:{close:function(){this.activeStep="visibleSecond",this.status=null},send:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={survey:"reading",checkboxes:t.options.filter((function(t){return t.checked})).map((function(t){return t.key})).join(),comment:"Why is this interesting to you (optional)"!=t.comment?t.comment:""},e.prev=1,e.next=4,N.sendSurvey(r);case 4:n=e.sent,200==n.status&&(t.status={type:"success",text:"Thank you! Your response was recorded."}),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),console.log(e.t0),t.status={type:"error",text:"Sorry, there was a problem."};case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})))()}}},ht=mt,pt=(r("8670"),Object(k["a"])(ht,lt,dt,!1,null,"4e2a786f",null)),ft=pt.exports,vt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",[t._v(t._s(t.counter))])},gt=[],yt={data:function(){return{counter:0}},computed:{daysSinceStart:function(){var t=new Date("2020-01-22"),e=new Date;return Math.ceil((e-t)/864e5)}},mounted:function(){this.count()},methods:{count:function(){var t=this;setTimeout((function(){t.counter++,t.counter<=t.daysSinceStart&&t.count()}),5)}}},bt=yt,xt=Object(k["a"])(bt,vt,gt,!1,null,"5c9d5361",null),wt=xt.exports,kt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.scales.x&&t.cases&&t.mounted?r("svg",{staticStyle:{overflow:"visible"},attrs:{width:t.dimensions.width,height:t.dimensions.height}},[r("g",{directives:[{name:"axis",rawName:"v-axis:x",value:t.scales,expression:"scales",arg:"x"}],staticClass:"axis xAxis",attrs:{transform:"translate(0,"+(t.dimensions.height-t.dimensions.top-t.dimensions.bottom+10)+")"}}),r("g",{directives:[{name:"axis",rawName:"v-axis:y",value:t.scales,expression:"scales",arg:"y"}],staticClass:"axis yAxis",attrs:{transform:"translate("+(t.dimensions.width-t.dimensions.right)+")"}}),r("text",{attrs:{transform:"translate("+(t.dimensions.width-t.dimensions.right+10)+","+(t.dimensions.height-t.dimensions.top)+")",opacity:".5","text-anchor":"end","font-size":".5em"}},[r("tspan",{attrs:{x:"0"}},[t._v("rolling average")]),r("tspan",{attrs:{x:"0",dy:"1.2em"}},[t._v("of new cases")]),r("tspan",{attrs:{x:"0",dy:"1.2em"}},[t._v("per 100.000")])]),r("path",{attrs:{d:t.caseLine,"stroke-width":"3","stroke-linejoin":"round",fill:"none",stroke:"black"}}),t.beeswarm[0]?r("g",{staticClass:"beeswarm"},[!t.consent&&t.progress<1&&"separated"!=t.display?r("g",{staticClass:"tutorial"},[r("rect",{attrs:{width:"200",height:"50",fill:"rgba(254,232,194,.7)",x:t.beeswarm[0].x-255,y:t.beeswarm[0].y-75}}),r("line",{attrs:{stroke:"#FA5E2D","stroke-width":".5",x1:t.beeswarm[0].x-5,y1:t.beeswarm[0].y-5,x2:t.beeswarm[0].x-50,y2:t.beeswarm[0].y-50}}),r("text",{attrs:{y:t.beeswarm[0].y-50,"font-size":".8em","text-anchor":"end"},on:{click:function(e){return t.$emit("demoClick")}}},["embedded"==t.display?r("tspan",{attrs:{x:t.beeswarm[0].x-55}},[t._v("A dot is a person's memory.")]):t._e(),"contextual"==t.display?r("tspan",{attrs:{x:t.beeswarm[0].x-55}},[t._v("A dot is a policy response.")]):t._e(),r("tspan",{attrs:{dy:"1.2em",x:t.beeswarm[0].x-55}},[t._v("Click to read them.")])]),r("path",{attrs:{d:t.beeswarm[0].d,fill:"#FA5E2D",transform:"translate("+t.beeswarm[0].x+","+t.beeswarm[0].y+")",opacity:t.opacity},on:{click:function(e){return t.$emit("demoClick")}}})]):t._e(),r("g",{staticClass:"circles"},t._l(t.beeswarm.filter((function(e,r){return r<t.progress&&e.isMemory})),(function(e){return r("path",{key:"circle-"+e.id,class:{inactive:t.activeHashtag&&e.hashtag&&!e.hashtag.includes(t.activeHashtag)},attrs:{d:e.d,transform:"translate("+e.x+","+e.y+")",id:"circle-"+e.id,opacity:-1!==t.activeMemories.findIndex((function(t){return t.id==e.id}))?1:t.opacity,fill:-1!==t.activeMemories.findIndex((function(t){return t.id==e.id}))?"#E63700":"#FA5E2D"},on:{click:function(r){return t.click(e.id)},mouseover:function(r){return t.hover(e,r)},mouseout:function(r){return t.hover(e,r)}}})})),0)]):t._e(),t.activeMemories&&t.progress>t.beeswarm.filter((function(t){return t.isMemory})).length-10?r("transition-group",{attrs:{name:"cards",tag:"g"}},t._l(t.memoryLinks,(function(e,n){return r("g",{key:"card-"+n},[r("line",{key:"line"+n,attrs:{stroke:"#E63700",x1:e.source.x,y1:e.source.y,x2:e.target.x,y2:e.target.y+40}}),r("foreignObject",{key:"fO"+n,staticStyle:{overflow:"visible"},attrs:{width:t.boxWidth,height:"1",x:e.target.x-t.boxWidth/2,y:e.target.y,requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[r("memoryCard",{attrs:{width:t.boxWidth,display:t.display,memory:e.target.memory}})],1)],1)})),0):t._e(),t.showDatepicker&&"embedded"==this.display?r("Datepicker"):t._e()],1):t._e()},_t=[],Ct=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("g",{staticClass:"datePicker",attrs:{transform:"translate("+t.x+",0)"},on:{mousedown:t.mouseDown,mouseup:t.mouseUp}},[r("line",{attrs:{y1:"0",y2:t.height,x1:"0",x2:"0",stroke:"#FA5E2D","stroke-width":"2px","stroke-dasharray":"0"}}),r("circle",{attrs:{r:"40",cx:"0",cy:t.y,fill:"#FA5E2D"}}),r("text",{attrs:{x:"0","text-anchor":"middle",y:t.y},domProps:{innerHTML:t._s(t.displayDate)}})])},St=[],Mt=(r("c7cd"),r("7db0"),{data:function(){return{formatDate:f["p"]("%Y-%m-%d"),parseDate:f["r"]("%Y-%m-%d"),height:window.innerHeight,x:-100,y:-100,fixed:!1,clicked:!1}},props:{},computed:{date:{set:function(t){this.$store.commit("setNewMemoryDate",t)},get:function(){return this.$store.state.newMemory.date}},scales:function(){return this.$store.state.scales},cases:function(){return this.$store.state.cases},exactDate:function(){return this.$store.state.newMemory.exactDate},displayDate:function(){return this.date?this.exactDate?this.formatDate(this.date):this.getRoughDate(this.date):null}},mounted:function(){document.addEventListener("mousemove",this.onMouseMove)},methods:{onMouseMove:function(t){this.fixed||t.clientX>this.scales.x.range()[0]&&t.clientX<this.scales.x.range()[1]&&(this.date=this.scales.x.invert(t.clientX),this.x=t.clientX,this.y=this.scales.y(this.getLineElement(this.date).value))},mouseUp:function(){this.fixed=!0},mouseDown:function(){this.clicked&&(this.fixed=!1),this.clicked=!0},getLineElement:function(t){var e="string"==typeof t?t:this.formatDate(t),r=this.cases.find((function(t){return t.dateString==e}));return r||null},getRoughDate:function(t){if(!t)return null;var e="Late ";t.getDate()<=20&&(e="Mid"),t.getDate()<=10&&(e="Early");var r=["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()],n="<tspan>"+e+"</tspan>";return n+="<tspan x='0' dy='15'>"+r+"</tspan>",n}}}),Dt=Mt,$t=(r("ff03"),Object(k["a"])(Dt,Ct,St,!1,null,"a4ef027a",null)),Tt=$t.exports,It={components:{Datepicker:Tt,memoryCard:Q},data:function(){return{mounted:!1,visibleHashtags:10,opacity:.8,lineGenerator:f["j"]().x((function(t){return t.x})).y((function(t){return t.y})),boxWidth:350}},props:{progress:Number,newMemory:Object,display:String,consent:Boolean},computed:{dimensions:function(){return this.$store.state.dimensions},cases:function(){return this.$store.state.cases},beeswarm:function(){return this.$store.getters.beeswarm},activeHashtag:function(){return this.$store.state.activeHashtag},scales:function(){return this.$store.state.scales},activeMemories:function(){return this.$store.getters.activeMemories},showDatepicker:function(){return this.$store.state.newMemory.datepicker},memoryLinks:function(){var t=this;if(!this.activeMemories)return null;var e=[],r=[];this.activeMemories.forEach((function(n){e.push({type:"circle",fx:n.x,fy:n.y}),e.push({type:"box",x:n.x-t.boxWidth/2,y:n.y-10,height:0,memory:n}),r.push({source:e.length-2,target:e.length-1})}));for(var n=f["g"](e).force("charge",f["f"]().strength(1)).force("link",f["e"]().links(r)).force("collide",f["d"](this.boxWidth/2)),a=0;a<=100;a++)n.tick();return r.forEach((function(e){var r=100;e.target.x<t.boxWidth/2&&(e.target.x=t.boxWidth/2+5),e.target.x>t.dimensions.width-t.boxWidth/2&&(e.target.x=t.dimensions.width-t.boxWidth/2-10),e.target.y<0&&(e.target.y=5),e.target.y>t.dimensions.height-r&&(e.target.y=t.dimensions.height-r-5)})),r},caseLine:function(){var t=this;if(!this.scales||!this.cases)return!1;var e=this.cases.map((function(e){return e.x=t.scales.x(e.date),e.y=t.scales.y(e.value),e}));return this.lineGenerator(e)}},watch:{},mounted:function(){this.mounted=!0},methods:{hover:function(t,e){if(!this.datePicker){var r="mouseover"==e.type?2:1;f["o"](e.target).transition("50").attr("transform","translate(".concat(t.x,",").concat(t.y,") scale(").concat(r,")"))}},click:function(t){var e="embedded"==this.display?"openMemory":"openContext";y.sendInteraction({event:e,element:t}),this.$store.commit("setActiveMemories",t)}},directives:{axis:function(t,e){var r=f["o"](t);switch(e.arg){case"x":r.call(f["a"](e.value.x).ticks(f["q"]).tickFormat(f["p"]("%b"))),r.selectAll(".domain").attr("stroke","none"),r.selectAll(".tick line").attr("stroke","none"),r.selectAll(".tick text").style("text-anchor","start").style("text-transform","UPPERCASE").style("opacity",.3);break;case"y":r.call(f["b"](e.value.y).tickSize(-1e3).ticks(5)),r.selectAll(".domain").attr("stroke","none"),r.selectAll(".tick line").attr("opacity",.05),r.selectAll(".tick text").attr("opacity",.3);break}}}},At=It,Et=(r("28cd"),Object(k["a"])(At,kt,_t,!1,null,"6461486e",null)),Wt=Et.exports,jt={name:"App",components:{Scrollama:H["a"],memoryForm:L,counter:wt,explore:ut,memoryList:nt,survey:ft,vis:Wt},data:function(){return{mounted:!1,consent:!1,currentStepId:0,steps:Array(3).fill(0),progress:0,ribbonText:"Help our research",initialClickOnAddButton:!1,clickedDemo:!1}},computed:{dimensions:function(){return this.$store.state.dimensions},cases:function(){return this.$store.state.cases},newMemory:function(){return this.$store.state.newMemory},context:function(){return this.$store.state.context},memories:function(){return this.$store.state.memories},testPath:function(){return this.$store.state.session.path},session:function(){return this.$store.getters.session.hash},countries:function(){return this.$store.state.countries.map((function(t){return{text:t.name+" ("+t.n_memories+")",value:t.name}}))}},mounted:function(){var t=this;this.mounted=!0,window.setInterval((function(){"Help our research"==t.ribbonText?t.ribbonText="Do our survey":t.ribbonText="Help our research"}),1e4)},methods:{enter:function(t){var e=this;this.consent=!0,y.sendInteraction({event:"consent"}),this.$nextTick((function(){e.$vuetify.goTo(t,{duration:2e3})}))},highlightConsent:function(){this.clickedDemo=!0},stepEnterHandler:function(t){var e=t.element,r=t.direction;switch(e.className){case"introWrapper":this.progress=0;break}"up"==r&&e.className.includes("explorationWrapper")&&this.$store.commit("toggleNewMemoryDatepicker",!1),"down"==r&&e.className.includes("formWrapper")&&this.initialClickOnAddButton&&this.$store.commit("toggleNewMemoryDatepicker",!0),this.currentStepId=e.dataset.step},stepProgressHandler:function(t){var e=t.element,r=t.progress;if("animatorWrapper"==e.className&&this.consent){var n=Math.ceil(r*this.memories.length);this.progress=n}},toggleForm:function(){var t=this;this.initialClickOnAddButton=!0,y.sendInteraction({event:this.newMemory.showForm?"hide":"show",element:"memoryForm"}),this.newMemory.showForm?(this.$store.commit("toggleForm",!1),this.$vuetify.goTo("#progressTarget",{duration:500})):(this.$store.commit("toggleForm",!0),this.$store.commit("toggleNewMemoryDatepicker",!0),this.$nextTick((function(){t.$vuetify.goTo("#addTarget",{duration:2e3})})))}}},Ft=jt,Ot=(r("7296"),r("6faa"),Object(k["a"])(Ft,O,P,!1,null,"055d152f",null)),Pt=Ot.exports,Ht=r("2321");n["default"].use(a["a"]),n["default"].config.productionTip=!1;var Rt=new a["a"]({routes:[{path:"/",component:Pt},{path:"/participantSheet/",component:Ht["default"]},{path:"/review/",component:F}]});new n["default"]({router:Rt,store:g,vuetify:$,render:function(t){return t(C)}}).$mount("#app")},6123:function(t,e,r){},6351:function(t,e,r){"use strict";var n=r("8f04"),a=r.n(n);e["default"]=a.a},"6a68":function(t,e,r){"use strict";r("1194")},"6faa":function(t,e,r){"use strict";r("5535")},"71ab":function(t,e,r){"use strict";r("6123")},8670:function(t,e,r){"use strict";r("c91a")},"871c":function(t,e,r){"use strict";r("19ba")},"8f04":function(t,e){},"9a1b":function(t,e,r){t.exports=r.p+"img/ed.2a026d4a.png"},a7ec:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("div",{staticClass:"introWrapper",attrs:{"data-step":"1"}},[r("h1",[r("router-link",{attrs:{to:"/"}},[t._v("corona"),r("br"),r("span",[t._v("memories")])])],1),r("h2",[t._v("Participant Information Sheet")]),r("p",[r("strong",[t._v("Project Title")]),t._v(": Corona Memories"),r("br"),r("strong",[t._v("Principal Investigator")]),t._v(": Dr. Benjamin Bach"),r("br"),r("strong",[t._v("Researchers")]),t._v(": Tobias Kauer, Dr. Marian Dörk"),r("br")]),r("p",[t._v("This study was certified according to the Informatics Research Ethics Process, RT number 5766. Please take time to read the following information carefully. You should keep this page for your records.")]),r("p",[r("strong",[r("em",[t._v("Who are the researchers?")])]),t._v(" The study is being conducted by Dr. Benjamin Bach and Tobias Kauer at the University of Edinburgh and Dr. Marian Dörk, University of Applied Sciences Potsdam.")]),r("p",[r("strong",[r("em",[t._v("What is the purpose of the study?")])]),t._v(" This study aims to understand how people read data visualizations and which stories they want to tell about the data in the visualization. ")]),r("p",[r("strong",[r("em",[t._v("Why have I been asked to take part?")])]),t._v("You have visited the website http://coronamemories.tobiaskauer.org.")]),r("p"),r("p",[r("strong",[r("em",[t._v("Do I have to take part?")])]),t._v(" Your participation and use of the website is entirely voluntary and you may stop using it at any time and for any reason. Your rights will not be affected. If you wish to withdraw, contact Tobias Kauer (T.Kauer@ed.ac.uk) and state which comment you wish to remove. If you stop participating at any point, data collection will end, but data already collected will be retained in anonymous form. We will stop using your data in any publications or presentations submitted after you have withdrawn consent. However, we will keep copies of your original consent, and of your withdrawal request.")]),r("p",[r("strong",[r("em",[t._v("What will happen if I decide to take part? ")])]),t._v("We will record your activity (timestamps and mouse events) on the website as well as collect your shared stories. If you decide to take part in the online survey, we will ask you about your experience viewing the visualization on the website mentioned above and may use your answers in future research publications. If you choose to submit a story to the website, we may use your submission in future research publications. ")]),r("p",[r("strong",[r("em",[t._v("Are there any risks associated with taking part?")])]),t._v(" There are no significant risks associated with participation. ")]),r("p",[r("strong",[r("em",[t._v("Are there any benefits associated with taking part?")])]),t._v(" You will support publicly funded research on creating interfaces for commenting on visualizations.")]),r("p",[r("strong",[r("em",[t._v("What will happen to the results of this study? ")])]),t._v(" The results of this study may be summarised in published scientific articles, reports and presentations. With your consent, short extracts of submitted stories and written feedback from the survey may be quoted in research papers to support key findings of our research. Your data may be archived for a minimum of two years. None of the publications will provide any monetary benefit to the research team and we are happy to send you a copy of any publication that emerged out of our study.")]),r("p",[r("strong",[r("em",[t._v("WData protection and confidentiality.")])]),t._v(" Your data will be processed in accordance with Data Protection Law. Your data will be referred to by a unique participant number rather than by name. Your data will only be viewed by the research team stated above. All electronic data will be stored on a password-protected encrypted computer, on the School of Informatics’ secure file servers, or on the University’s secure encrypted cloud storage services (DataShare, ownCloud, or Sharepoint).")]),r("p",[r("strong",[r("em",[t._v("What are my data protection rights?")])]),t._v(" The University of Edinburgh is a Data Controller for the information you provide. You have the right to access information held about you. Your right of access can be exercised in accordance with the Data Protection Law. You also have other rights including rights of correction, erasure and objection. For more details, including the right to lodge a complaint with the Information Commissioner’s Office, please visit www.ico.org.uk. Questions, comments and requests about your personal data can also be sent to the University Data Protection Officer at dpo@ed.ac.uk. ")]),r("p",[r("strong",[r("em",[t._v("Who can I contact?")])]),t._v(" If you have any further questions about the study, please contact the lead researcher, Tobias Kauer at T.Kauer@ed.ac.uk. If you wish to make a complaint about the study, please contact inf-ethics@inf.ed.ac.uk. When you contact us, please provide the study title and detail the nature of your complaint.")]),r("p",[r("strong",[r("em",[t._v("Updated information.")])]),t._v(" If the research project changes in any way, an updated Participant Information Sheet will be made available on https://web.inf.ed.ac.uk/infweb/research/study-updates.")]),r("p",[r("strong",[r("em",[t._v("Alternative formats")])]),t._v(" To request this document in an alternative format, such as large print or on coloured paper, please contact Tobias Kauer at T.Kauer@ed.ac.uk.")]),r("p",[r("strong",[r("em",[t._v("General information.")])]),t._v(" For general information about how we use your data, go to: edin.ac/privacy-research")])])])},a=[]},b01d:function(t,e,r){},b706:function(t,e,r){},c91a:function(t,e,r){},d5b1:function(t,e,r){t.exports=r.p+"img/fh.5e0cefb1.png"},f3aa:function(t,e,r){},ff03:function(t,e,r){"use strict";r("f3aa")}});
//# sourceMappingURL=app.b30b67a1.js.map