(function(e){function t(t){for(var n,o,i=t[0],c=t[1],u=t[2],m=0,d=[];m<i.length;m++)o=i[m],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,i=1;i<r.length;i++){var c=r[i];0!==a[c]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},s=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/corona-memories/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"1f1a":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[e.cases&&e.memories&&e.countries&&e.mounted?[r("Scrollama",{staticClass:"scrollama",attrs:{progress:!0},on:{"step-enter":e.stepEnterHandler,"step-progress":e.stepProgressHandler}},[r("div",{ref:"vis",staticClass:"visWrapper",attrs:{slot:"graphic"},slot:"graphic"},[r("vis",{attrs:{cases:e.cases,memories:e.memories,options:e.visOptions,datePicker:e.newMemory.datepicker,hashtag:e.activeHashtag},on:{toggleForm:function(t){return e.toggleForm(t)},showMemory:e.showMemory}})],1),r("div",{staticClass:"introWrapper",attrs:{"data-step":"1"}},[r("h1",[e._v("corona"),r("br"),r("span",[e._v("memories")])]),r("p",{staticClass:"larger"},[e._v(" Numbers do not tell stories. "),r("strong",[e._v("People do.")])]),r("p",[e._v("Since the start of the pandemic "),r("strong",[e._v("about "),r("counter"),e._v(" days")],1),e._v(" ago, we are confronted with charts about new cases or even deaths. What are the human stories behind the numbers?")]),r("p",{staticClass:"smaller"},[e._v("The research is conducted by Tobias Kauer (University of Edinburgh), Benjamin Bach (University of Edinburgh), and Marian Dörk (Potsdam University of Applied Sciences). It has been granted approval by the ethics committee. By clicking the button, you indicate that you are a speaker of English and at least 18 years old. You have read the "),r("a",{attrs:{href:"#"}},[e._v("information letter")]),e._v(" and you voluntarily agree to participate, and understand you can stop your participation at any time. You agree that your anonymous data may be kept permanently in Edinburgh University archived and may be used by qualified researchers for teaching and research purposes.")]),r("v-btn",{attrs:{color:"primary",outlined:""},on:{click:e.giveConsent}},[r("v-icon",{attrs:{small:""}},[e._v("mdi-check-circle")]),e._v(" I agree, show me ")],1)],1),r("div",{staticClass:"animatorWrapper",attrs:{"data-step":"2"}}),e.consent?r("div",{staticClass:"explorationWrapper",attrs:{id:"target","data-step":"3"}},[r("p",[r("strong",[e._v("Click the bubbles to read people’s stories.")]),r("br"),e._v("Select countries and/or hashtags to filter.")]),r("v-select",{attrs:{items:e.countries,label:"Your country",outlined:""},model:{value:e.currentCountry,callback:function(t){e.currentCountry=t},expression:"currentCountry"}}),e.hashtags?r("p",{staticClass:"hashtags"},e._l(e.hashtags.filter((function(e,t){return t<10})).sort((function(e,t){return e.tag.localeCompare(t.tag)})),(function(t,n){return r("v-chip",{key:"hashtag-"+n,style:{fontSize:t.size+"px",margin:"2px"},attrs:{small:"",color:"primary",outlined:e.activeHashtag!=t.tag},on:{click:function(r){return e.filterMemories(t.tag)}}},[e._v(e._s(t.tag)+" ")])})),1):e._e()],1):e._e()]),e.consent&&e.currentStepId>1?r("div",{staticClass:"callToActionWrapper"},[r("v-btn",{attrs:{color:"primary",outlined:"",elevation:"2"},on:{click:e.toggleDatepicker}},[e.newMemory.datepicker?[r("v-icon",{attrs:{small:""}},[e._v("mdi-close-circle-outline")]),e._v("Stop adding ")]:[r("v-icon",{attrs:{small:""}},[e._v("mdi-tooltip-plus-outline")]),e._v("Add your story ")]],2)],1):e._e(),e.newMemory.showForm?r("div",{staticClass:"formWrapper"},[r("memoryForm",{attrs:{date:e.newMemory.date,country:e.currentCountry,countries:e.countries,hashtags:e.hashtags},on:{close:function(t){return e.toggleForm(!1)}}})],1):e._e(),e.displayMemory.display?r("div",{staticClass:"memoryWrapper"},[r("memoryDisplay",{attrs:{memory:e.displayMemory.memory},on:{close:function(t){return e.showMemory(!1)},previous:function(t){return e.changeMemory("previous")},next:function(t){return e.changeMemory("next")}}})],1):e._e()]:[r("v-card",{staticClass:"d-flex justify-center mb-6",staticStyle:{"margin-top":"100px"},attrs:{color:"rgb(255, 0, 0, 0.0)",elevation:"0"}},[r("v-progress-circular",{attrs:{size:300,indeterminate:"",color:"primary"}},[e._v("Loading ..."),r("br"),e._v("try refresing?")])],1)]],2)},s=[],o=(r("4de4"),r("c740"),r("0481"),r("4160"),r("d81d"),r("13d5"),r("4069"),r("b64b"),r("ac1f"),r("466d"),r("159b"),r("96cf"),r("1da1")),i=r("3003"),c=(r("5abe"),r("a57f")),u=r("5698"),l=r("bc3a"),m=r.n(l),d=function(){return m.a.create({baseURL:"https://corona-memories-server.herokuapp.com"})},h={getCases:function(e){return d().post("getCases",e)},getCountries:function(){return d().post("getCountries")}},p={sendMemory:function(e){return d().post("sendMemory",e)},getMemories:function(e){return d().post("getMemories",e)},upvoteMemory:function(e){return d().post("upvoteMemory",e)}},f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-overlay",[r("v-card",{staticClass:"mx-auto",attrs:{elevation:"2","max-width":"500","min-width":"400",light:""}},[e.status?r("v-card-text",[r("v-alert",{attrs:{border:"left","colored-border":"",color:"primary",elevation:"2"}},[e._v(" "+e._s(e.status)+" ")]),r("v-btn",{attrs:{block:"",color:"primary",outlined:""},on:{click:function(t){return e.close()}}},[e._v("Cool!")])],1):r("v-card-text",[r("v-expansion-panels",{attrs:{accordion:"",focusable:""},model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("(1) Add your story to the curve")]),r("v-expansion-panel-content",[r("v-form",{staticStyle:{padding:"10px 0"}},[r("v-textarea",{staticClass:"ma-0p pa-0",attrs:{dense:"",outlined:"",label:"Your Story"},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}})],1),e.hashtags&&e.showHashtags>0?r("p",{staticClass:"hashtags"},[e._v(" Adding these (or other) tags to your story helps others to find it "),r("br"),e._l(e.hashtags.filter((function(t,r){return r<e.showHashtags})).sort((function(e,t){return e.tag.localeCompare(t.tag)})),(function(t,n){return r("v-chip",{key:"hashtag-"+n,style:{margin:"2px"},attrs:{small:"",color:"primary",outlined:!e.comment.includes(t.tag)},on:{click:function(r){return e.addTag(t.tag)}}},[e._v(e._s(t.tag)+" ")])})),r("a",{on:{click:function(t){e.showHashtags=20}}},[e._v("show more")])],2):e._e()],1)],1),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("(2) Tell us some more")]),r("v-expansion-panel-content",[r("v-form",{staticStyle:{padding:"10px 0"}},[r("v-text-field",{attrs:{dense:"",outlined:"",label:"Name (optional)"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),r("v-select",{attrs:{items:e.countries,dense:"",label:"Your country",outlined:""},model:{value:e.currentCountry,callback:function(t){e.currentCountry=t},expression:"currentCountry"}}),e.exactDate?[r("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[r("v-text-field",e._g(e._b({staticClass:"ma-0",attrs:{label:"Pick a date","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.stringDate,callback:function(t){e.stringDate=t},expression:"stringDate"}},"v-text-field",a,!1),n))]}}]),model:{value:e.datepicker,callback:function(t){e.datepicker=t},expression:"datepicker"}},[r("v-date-picker",{on:{input:function(t){e.datepicker=!1}},model:{value:e.stringDate,callback:function(t){e.stringDate=t},expression:"stringDate"}})],1)]:[r("v-text-field",{staticClass:"ma-0",attrs:{label:"Date",outlined:"",dense:"",readonly:""},model:{value:e.roughDate,callback:function(t){e.roughDate=t},expression:"roughDate"}})],r("v-checkbox",{staticClass:"ma-0",attrs:{label:"Use exact date"},model:{value:e.exactDate,callback:function(t){e.exactDate=t},expression:"exactDate"}})],2)],1)],1)],1),r("v-btn",{staticStyle:{margin:"10px 0"},attrs:{block:"",color:"primary",outlined:""},on:{click:e.sendMemory}},[e._v("Send")]),r("v-btn",{style:{left:"50%",transform:"translateX(-50%)"},attrs:{"x-small":""},on:{click:function(t){return e.close()}}},[e._v("cancel")])],1)],1)],1)},v=[],y=(r("b0c0"),{data:function(){return{comment:"",name:"",status:!1,currentCountry:null,exactDate:!1,stringDate:null,datepicker:!1,panel:0,showHashtags:0}},props:{country:String,countries:Array,hashtags:Array,date:String},mounted:function(){this.stringDate=this.date,this.currentCountry=this.country},computed:{roughDate:function(){if(!this.stringDate)return null;var e=new Date(this.stringDate),t="Late";e.getDate()<=20&&(t="Mid"),e.getDate()<=10&&(t="Early");var r=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()];return t+" "+r}},methods:{addTag:function(e){this.comment=this.comment+" "+e},sendMemory:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,r={comment:e.comment,date:new Date(e.date),name:e.name,country:e.country,id:null,exact:e.exactDate},t.prev=2,t.next=5,p.sendMemory(r);case 5:n=t.sent,n&&(e.loading=!1),200==n.status&&(e.status="Your memory has been recorded"),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),e.status=t.t0.response.data.error;case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))()},close:function(){this.status=!1,this.$emit("close")}},watch:{comment:function(e){e.length>2&&this.showHashtags<10&&(this.showHashtags=10)}}}),g=y,b=(r("74a1"),r("2877")),x=Object(b["a"])(g,f,v,!1,null,"1d093ecc",null),w=x.exports,k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"container",attrs:{fluid:""}},[r("v-row",{attrs:{dense:"",justify:"center"}},[r("v-col",{staticStyle:{"text-align":"right"}},[r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$emit("previous")}}},[r("v-icon",{attrs:{color:"lightgrey",center:""}},[e._v("mdi-chevron-left-circle")])],1)],1),r("v-col",[r("v-card",{attrs:{id:"memoryCard",elevation:"2","min-width":"300","max-width":"500"}},[r("div",[r("v-btn",{staticStyle:{position:"absolute",right:"5px",top:"0px"},attrs:{icon:""},on:{click:e.close}},[r("v-icon",{attrs:{center:"",color:"white",small:""}},[e._v("mdi-close-circle")])],1)],1),r("v-card-text",[r("v-row",{attrs:{dense:"",align:"center"}},[r("v-col",{staticClass:"col-auto",staticStyle:{"margin-right":"20px"}},[r("v-btn",{attrs:{fab:"",outlined:"",center:"",color:"white"},on:{click:function(t){return e.upvote(t)}}},[r("strong",[e._v(e._s(e.weight))]),r("br"),r("v-icon",{attrs:{small:""}},[e._v("mdi-heart")])],1)],1),r("v-col",[r("p",{staticStyle:{"font-size":".8em","font-family":"monospace","margin-bottom":"0"}},[e.memory.author?r("span",[e._v(" "+e._s(e.memory.author))]):r("span",[r("em",[e._v(e._s(e.anonymous))])]),e._v(", "+e._s(e.displayDate)+" ")]),r("p",[e._v(e._s(e.memory.comment))])])],1)],1)],1)],1),r("v-col",[r("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$emit("next")}}},[r("v-icon",{attrs:{color:"lightgrey",center:""}},[e._v("mdi-chevron-right-circle")])],1)],1)],1)],1)},_=[],M={data:function(){return{weight:null}},props:{memory:Object},created:function(){this.weight=this.memory.weight},computed:{displayDate:function(){if(console.log(this.memory,"foo"),!this.memory.date)return null;if(this.memory.exactDate)return this.memory.date;var e=new Date(this.memory.date),t="Late";e.getDate()<=20&&(t="Mid"),e.getDate()<=10&&(t="Early");var r=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()];return t+" "+r}},methods:{close:function(){this.$emit("close")},upvote:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log();try{p.upvoteMemory({id:e.memory.id}).then((function(t){e.weight=t.data.weight}))}catch(r){console.log(r)}case 2:case"end":return t.stop()}}),t)})))()}}},D=M,C=(r("5dca"),Object(b["a"])(D,k,_,!1,null,"7229a01d",null)),S=C.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[e._v(e._s(e.counter))])},A=[],E={data:function(){return{counter:0}},computed:{daysSinceStart:function(){var e=new Date("2020-01-22"),t=new Date;return Math.ceil((t-e)/864e5)}},mounted:function(){this.count()},methods:{count:function(){var e=this;setTimeout((function(){e.counter++,e.counter<=e.daysSinceStart&&e.count()}),5)}}},j=E,F=Object(b["a"])(j,O,A,!1,null,"5c9d5361",null),P=F.exports,H=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("svg",{attrs:{width:e.options.dimensions.width,height:e.options.dimensions.height}},[r("lines",{attrs:{dimensions:e.options.dimensions,scales:e.scales,cases:e.parsedCases}}),e.force?r("g",{staticClass:"memories",attrs:{transform:"translate(0,0)"}},[e._l(e.parsedMemories.filter((function(t,r){return r<e.options.progress})),(function(t,n){return r("circle",{key:"circle-"+n,class:{inactive:t.inactive},attrs:{cx:t.x,cy:t.y,r:t.radius,fill:"#FA5E2D",opacity:e.opacity},on:{click:function(r){return e.$emit("showMemory",t)},mouseover:function(r){return e.hover(t,r)},mouseout:function(r){return e.hover(t,r)}}})})),e.hashtagLabels&&e.options.progress>=e.parsedMemories.length-10?r("g",e._l(e.hashtagLabels,(function(t,n){return r("g",{key:"label-"+n,attrs:{"pointer-events":"none"}},[r("line",{attrs:{stroke:"#FA5E2D","stroke-width":".5",x1:t.source.x,y1:t.source.y,x2:t.target.x,y2:t.target.y+1}}),r("text",{staticStyle:{"text-decoration":"underline"},attrs:{"font-weight":"bold",fill:"#FA5E2D","font-size":"11",x:t.target.x,"text-anchor":t.target.anchor,y:t.target.y}},[e._v(e._s(t.target.text))])])})),0):e._e()],2):e._e(),e.datePicker?r("g",{staticClass:"datePicker",attrs:{transform:"translate("+e.newMemory.position.x+",0)"},on:{click:function(t){e.$emit("toggleForm",e.formatDate(e.newMemory.date))}}},[r("line",{attrs:{y1:"0",y2:e.options.dimensions.height,x1:"0",x2:"0",stroke:"#FA5E2D","stroke-width":"2px","stroke-dasharray":"0"}}),r("circle",{attrs:{r:"40",cx:"0",cy:e.newMemory.position.y,fill:"#FA5E2D"}}),r("text",{attrs:{x:"0","text-anchor":"middle",y:e.newMemory.position.y}},[e._v(e._s(e.getRoughDate(e.newMemory.date)))])]):e._e(),e.options.overlay?r("g",{staticClass:"overlay"},[r("rect",{attrs:{x:"0",y:"0",width:e.options.dimensions.width,height:e.options.dimensions.height,fill:"black",opacity:".5","pointer-events":"none"}}),e.currentMemory?r("g",[r("circle",{attrs:{r:"20",cx:e.currentMemory.x,cy:e.currentMemory.y,fill:"#FA5E2D"}}),r("path",{attrs:{d:e.currentMemory.connector,"stroke-width":"2",fill:"none",stroke:"#FA5E2D"}})]):e._e()]):e._e()],1)},L=[],R=(r("99af"),r("7db0"),r("caad"),r("fb6a"),r("2532"),r("18a5"),r("2909")),T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("g",[r("g",{directives:[{name:"axis",rawName:"v-axis:x",value:e.scales,expression:"scales",arg:"x"}],staticClass:"axis xAxis",attrs:{transform:"translate(0,"+(e.dimensions.height-e.dimensions.top-e.dimensions.bottom+10)+")"}}),r("g",{directives:[{name:"axis",rawName:"v-axis:y",value:e.scales,expression:"scales",arg:"y"}],staticClass:"axis yAxis",attrs:{transform:"translate("+(e.dimensions.width-e.dimensions.right)+")"}}),r("path",{attrs:{d:e.caseLine,"stroke-width":"3","stroke-linejoin":"round",fill:"none",stroke:"black"}})])},$=[],z={data:function(){return{parseDate:u["r"]("%Y-%m-%d"),formatDate:u["p"]("%Y-%m-%d"),lineGenerator:u["k"]().x((function(e){return e.x})).y((function(e){return e.y}))}},props:{dimensions:Object,cases:Array,scales:Object},computed:{caseLine:function(){var e=this;if(!this.scales||!this.cases)return!1;var t=this.cases.map((function(t){return t.x=e.scales.x(t.date),t.y=e.scales.y(t.value),t}));return this.lineGenerator(t)}},directives:{axis:function(e,t){var r=u["o"](e);switch(t.arg){case"x":r.call(u["a"](t.value.x).ticks(u["q"]).tickFormat(u["p"]("%b"))),r.selectAll(".domain").attr("stroke","none"),r.selectAll(".tick line").attr("stroke","none"),r.selectAll(".tick text").style("text-anchor","end").style("text-transform","UPPERCASE").style("opacity",.3);break;case"y":r.call(u["b"](t.value.y).tickSize(-1e3).ticks(5)),r.selectAll(".domain").attr("stroke","none"),r.selectAll(".tick line").attr("opacity",.05),r.selectAll(".tick text").attr("opacity",.3);break}}}},J=z,W=Object(b["a"])(J,T,$,!1,null,"5e05215d",null),Y=W.exports,N={components:{lines:Y},data:function(){return{parseDate:u["r"]("%Y-%m-%d"),formatDate:u["p"]("%Y-%m-%d"),lineGenerator:u["k"]().x((function(e){return e.x})).y((function(e){return e.y})).curve(u["c"]),force:null,opacity:.8,forceDistance:8,currentMemory:null,newMemory:{date:null,show:!1,position:{x:-100,y:-100}}}},props:{options:Object,hashtag:String,cases:Array,memories:Array,datePicker:Boolean},computed:{parsedCases:function(){var e=this;return this.cases.map((function(t){return{dateString:t.d,date:e.parseDate(t.d),value:t.v}}))},scales:function(){if(!this.parsedCases&&this.memories)return null;var e=[0,u["l"]([50,u["l"](this.parsedCases,(function(e){return e.value}))])],t=u["d"](this.parsedCases,(function(e){return e.date})),r=u["d"](this.memories,(function(e){return e.weight})),n=u["n"]().domain(t).range([this.options.dimensions.left,this.options.dimensions.width-this.options.dimensions.right]),a=u["m"]().domain(e).range([this.options.dimensions.height-this.options.dimensions.bottom-this.options.dimensions.top,this.options.dimensions.top]),s=u["m"]().domain(r).range([2,6]);return{x:n,y:a,radius:s}},parsedMemories:function(){var e=this;return this.memories?(this.scales,this.memories.map((function(t,r){var n=r%2?1:-1;return t.Date=e.parseDate(t.date),t.x=e.scales.x(t.Date),t.value=e.getLineElement(t.date).value,t.y=e.scales.y(t.value)+e.forceDistance*n,t.radius=e.scales.radius(t.weight),t.hashtag=t.comment.match(/#[a-z]+/gi)?t.comment.match(/#[a-z]+/gi)[0]:null,t}))):null},hashtagLabels:function(){if(!this.memories)return null;this.scales;var e=[],t=[],r=this.memories.filter((function(e){return e.hashtag&&!e.inactive})),n=Object(R["a"])(r).sort((function(e,t){return t.Date-e.Date}))[0],a=r.sort((function(e,t){return t.weight-e.weight})).slice(0,10);a.push(n),a.forEach((function(r,n){e.push({type:"circle",fx:r.x,fy:r.y}),e.push({type:"label",text:r.hashtag}),t.push({source:2*n,target:2*n+1})}));for(var s=u["h"](e).force("charge",u["g"]().strength(-0)).force("link",u["f"]().links(t)).force("collide",u["e"]((function(e){return e.text?2*e.text.length:50}))),o=0;o<=200;o++)s.tick();return t.forEach((function(e){e.target.anchor=e.target.x>e.source.x?"start":"end"})),t}},watch:{parsedMemories:function(e){this.releaseTheBees(e)},hashtag:function(e){var t=this;if(!this.memories)return null;this.memories.forEach((function(r,a){e&&!r.comment.includes(e)?n["default"].set(t.memories[a],"inactive",!0):n["default"].set(t.memories[a],"inactive",!1)}))},memories:function(e){var t=e.filter((function(e){return e.active}))[0];t&&(this.currentMemory=t,this.currentMemory.connector="\n          M".concat(t.x," ").concat(t.y,"\n          Q").concat(this.options.dimensions.width/2," ").concat(t.y,"\n          ").concat(this.options.dimensions.width/2," ",50))}},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.releaseTheBees(e.memories),document.addEventListener("mousemove",e.onMouseMove);case 2:case"end":return t.stop()}}),t)})))()},methods:{releaseTheBees:function(e){this.force=u["h"](e).force("forceX",u["i"]((function(e){return e.x})).strength(.1)).force("forceY",u["j"]((function(e){return e.y})).strength(.1)).force("collide",u["e"]((function(e){return e.radius+.5})));for(var t=0;t<=20;t++)this.force.tick()},hover:function(e,t){if(!this.datePicker){var r=10,n=1;"mouseout"==t.type&&(r=e.weight,n=this.opacity),u["o"](t.target).transition("50").attr("r",r).attr("opacity",n)}},getLineElement:function(e){var t=this.parsedCases.find((function(t){return e==t.dateString}));return t||null},getLineSegment:function(e,t){e="string"===typeof e?this.parseDate(e):e,t="string"===typeof t?this.parseDate(t):t;var r=this.parsedCases.filter((function(r){return r.date<t&&r.date>e||r.date>t&&r.date<e}));return r},getRoughDate:function(e){if(!e)return null;var t="Late";e.getDate()<=20&&(t="Mid"),e.getDate()<=10&&(t="Early");var r=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()];return t+" "+r},onMouseMove:function(e){if(this.datePicker&&e.clientX>this.scales.x.range()[0]&&e.clientX<this.scales.x.range()[1]){var t=this.scales.x.invert(e.clientX),r=this.formatDate(t),a=this.scales.y(this.getLineElement(r).value);n["default"].set(this.newMemory,"date",t),n["default"].set(this.newMemory.position,"x",e.clientX),n["default"].set(this.newMemory.position,"y",a)}}}},I=N,B=(r("c8b1"),Object(b["a"])(I,H,L,!1,null,"ceb66ba6",null)),U=B.exports;n["default"].use(i["a"]);var X={name:"App",components:{Scrollama:c["a"],memoryForm:w,memoryDisplay:S,counter:P,vis:U},data:function(){return{mounted:!1,consent:!0,currentStepId:0,countries:null,currentCountry:"Germany",hashtags:null,activeHashtag:null,visOptions:{dimensions:{width:0,height:0,top:100,right:100,bottom:0,left:100},progess:0,overlay:!1},displayMemory:{display:!1,memory:null},newMemory:{datepicker:!1,showForm:!1,date:""}}},asyncComputed:{cases:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h.getCases({country:e.currentCountry,metric:"relative_cases"});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})))()},memories:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p.getMemories({country:e.currentCountry});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})))()}},watch:{memories:function(e){var t=e.map((function(e){return e.comment.match(/#[a-z]+/gi)})).flat().filter((function(e){return e})),r=t.reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{}),n=Object.keys(r).map((function(e){return{tag:e,occurences:r[e]}})).sort((function(e,t){return t.occurences-e.occurences})),a=u["m"]().domain(u["d"](n,(function(e){return e.occurences}))).range([5,15]);n.forEach((function(e){return e.size=a(e.occurences)})),this.hashtags=n}},created:function(){window.addEventListener("resize",this.resize)},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h.getCountries();case 2:e.countries=t.sent.data.map((function(e){return e.country})),e.$nextTick((function(){e.resize(),e.mounted=!0}));case 4:case"end":return t.stop()}}),t)})))()},methods:{resize:function(){n["default"].set(this.visOptions.dimensions,"width",window.innerWidth),n["default"].set(this.visOptions.dimensions,"height",window.innerHeight)},giveConsent:function(){var e=this;this.consent=!0,this.$nextTick((function(){e.$vuetify.goTo("#target",{duration:2e3})}))},showMemory:function(e){e?(n["default"].set(this.memories[this.memories.findIndex((function(t){return t.id==e.id}))],"active",!0),n["default"].set(this.displayMemory,"memory",e),n["default"].set(this.displayMemory,"display",!0),n["default"].set(this.visOptions,"overlay",!0)):(n["default"].set(this.displayMemory,"display",!1),n["default"].set(this.memories[this.memories.findIndex((function(e){return e.active}))],"active",!1),n["default"].set(this.visOptions,"overlay",!1))},changeMemory:function(e){var t,r=this.memories.findIndex((function(e){return e.active}));"next"==e&&(t=r+1),"previous"==e&&(t=r-1),t&&this.memories[t]&&(n["default"].set(this.displayMemory,"memory",this.memories[t]),n["default"].set(this.memories[r],"active",!1),n["default"].set(this.memories[t],"active",!0))},stepEnterHandler:function(e){var t=e.element;e.direction;switch(t.className){case"introWrapper":n["default"].set(this.visOptions,"progress",0);break}this.currentStepId=t.dataset.step},stepProgressHandler:function(e){var t=e.element,r=e.progress;if("animatorWrapper"==t.className&&this.consent){var a=Math.ceil(r*this.memories.length);n["default"].set(this.visOptions,"progress",a)}},toggleDatepicker:function(){var e=!this.newMemory.datepicker;n["default"].set(this.newMemory,"datepicker",e)},filterMemories:function(e){this.activeHashtag!=e?this.activeHashtag=e:this.activeHashtag=null},toggleForm:function(e){e?(n["default"].set(this.newMemory,"date",e),n["default"].set(this.newMemory,"datepicker",!1),n["default"].set(this.newMemory,"showForm",!0),this.overlay=!0):(n["default"].set(this.newMemory,"showForm",!1),this.overlay=!1)}}},G=X,q=(r("7296"),r("b1f1"),Object(b["a"])(G,a,s,!1,null,"7ad86984",null)),K=q.exports,Q=r("ce5b"),V=r.n(Q);r("bf40"),r("5363");n["default"].use(V.a);var Z={icons:{iconfont:"mdi"},theme:{themes:{light:{primary:"#FA5E2D",secondary:"#b0bec5",anchor:"#8c9eff"},dark:!1}}},ee=new V.a(Z);n["default"].config.productionTip=!1,new n["default"]({vuetify:ee,render:function(e){return e(K)}}).$mount("#app")},"5dca":function(e,t,r){"use strict";r("e13c")},"5fd1":function(e,t,r){},"74a1":function(e,t,r){"use strict";r("5fd1")},"9c3b":function(e,t,r){},b1f1:function(e,t,r){"use strict";r("1f1a")},c8b1:function(e,t,r){"use strict";r("9c3b")},e13c:function(e,t,r){}});
//# sourceMappingURL=app.e3ca8920.js.map